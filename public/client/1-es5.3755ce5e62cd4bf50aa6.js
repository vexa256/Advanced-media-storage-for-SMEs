function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+fqm":function(e,t,n){"use strict";n.d(t,"a",(function(){return Re}));var i=n("fXoL"),a=n("2Vo4"),o=n("oSJP"),r=n("He21"),c=n("7EHt"),s=n("/RwR"),l=n("lJxs"),u=n("nYR2"),d=n("Lm4C"),p=n("QeDF"),b=n("XFMS"),h=n("oJgS"),m=n("/Sbb"),f=n("XSk8"),g=n("3Pt+"),v=n("twBr"),y=n("IAz0"),_=n("i2dy"),k=n("QGXG"),C=n("2zME"),x=n("h586"),O=n("Se92"),P=n("tyNb"),w=n("kmQS"),I=n("OkhP"),V=n("ofXK"),A=n("pCVY"),U=n("bTqV"),M=n("Rd8u"),F=n("GZAL"),T=n("gcYM"),S=n("eNwd"),D=n("bv9b"),E=n("NFeN"),j=n("Qu3c"),Q=n("zW5C");function R(e,t){if(1&e&&(i.Vb(0,"div",7),i.Jc(1),i.Vb(2,"span",8),i.Jc(3,"left"),i.Ub(),i.Ub()),2&e){var n=i.gc();i.Cb(1),i.Lc(" ",n.progress.eta," ")}}function L(e,t){1&e&&(i.Qb(0,"mat-icon",9),i.hc(1,"trans")),2&e&&i.nc("matTooltip",i.ic(1,1,t.ngIf))}function $(e,t){1&e&&(i.Vb(0,"span",8),i.Jc(1,"Upload complete."),i.Ub())}function H(e,t){1&e&&(i.Vb(0,"span",8),i.Jc(1,"We are processing your track for playback\u2026"),i.Ub())}function J(e,t){if(1&e){var n=i.Wb();i.Vb(0,"span",12),i.cc("click",(function(){return i.yc(n),i.gc(2).upload.cancel()})),i.Jc(1,"Cancel"),i.Ub()}}function z(e,t){if(1&e&&(i.Hc(0,$,2,0,"span",10),i.Hc(1,H,2,0,"span",10),i.hc(2,"async"),i.Hc(3,J,2,0,"span",11),i.hc(4,"async")),2&e){var n=i.gc();i.nc("ngIf",n.upload.completed),i.Cb(1),i.nc("ngIf",i.ic(2,3,n.upload.processing$)),i.Cb(2),i.nc("ngIf",!i.ic(4,5,n.upload.processing$)&&!n.upload.completed)}}var B,N=((B=function(){function e(t){_classCallCheck(this,e),this.cd=t}return _createClass(e,[{key:"ngOnChanges",value:function(){var e=this;this.subscription&&this.subscription.unsubscribe(),this.subscription=this.upload.progress$.pipe(Object(T.a)(260,S.a,{leading:!0,trailing:!0})).subscribe((function(t){e.progress=t,e.cd.detectChanges()}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||B)(i.Pb(i.h))},B.\u0275cmp=i.Jb({type:B,selectors:[["track-upload-header"]],inputs:{upload:"upload"},features:[i.Ab],decls:11,vars:10,consts:[[1,"meta"],[1,"name"],["class","time-left",4,"ngIf"],[1,"actions"],["class","error-icon action-icon","svgIcon","error-outline","matTooltipPosition","left",3,"matTooltip",4,"ngIf","ngIfElse"],["noError",""],["color","accent",3,"mode","value"],[1,"time-left"],["trans",""],["svgIcon","error-outline","matTooltipPosition","left",1,"error-icon","action-icon",3,"matTooltip"],["trans","",4,"ngIf"],["class","cancel-button","trans","",3,"click",4,"ngIf"],["trans","",1,"cancel-button",3,"click"]],template:function(e,t){if(1&e&&(i.Vb(0,"div",0),i.Vb(1,"div",1),i.Jc(2),i.Ub(),i.Hc(3,R,4,1,"div",2),i.Vb(4,"div",3),i.Hc(5,L,2,3,"mat-icon",4),i.hc(6,"async"),i.Hc(7,z,5,7,"ng-template",null,5,i.Ic),i.Ub(),i.Ub(),i.Qb(9,"mat-progress-bar",6),i.hc(10,"async")),2&e){var n=i.vc(8);i.Cb(2),i.Kc(t.upload.uploadedFile.name),i.Cb(1),i.nc("ngIf",t.progress.percentage&&t.progress.percentage<100&&!t.upload.error$.value),i.Cb(2),i.nc("ngIf",i.ic(6,6,t.upload.error$))("ngIfElse",n),i.Cb(4),i.nc("mode",i.ic(10,8,t.upload.processing$)?"indeterminate":"determinate")("value",t.progress.percentage)}},directives:[V.t,D.a,M.a,E.a,j.a],pipes:[V.b,Q.a],styles:["[_nghost-%COMP%]{display:block;color:var(--be-secondary-text);font-size:1.3rem}.meta[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}.name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.name[_ngcontent-%COMP%], .time-left[_ngcontent-%COMP%]{white-space:nowrap}.actions[_ngcontent-%COMP%], .time-left[_ngcontent-%COMP%]{padding-left:20px}.actions[_ngcontent-%COMP%]{margin-left:auto}.action-icon[_ngcontent-%COMP%]{vertical-align:middle;width:22px;height:22px;margin-bottom:4px}.completed-icon[_ngcontent-%COMP%]{color:#43a047}.error-icon[_ngcontent-%COMP%]{color:#f44336}.cancel-button[_ngcontent-%COMP%]{color:var(--be-link);cursor:pointer;font-size:1.2rem;text-transform:uppercase;line-height:22px}.cancel-button[_ngcontent-%COMP%]:hover{text-decoration:underline}"],changeDetection:0}),B),K=n("Kj3r"),q=n("/uUt"),W=n("eIep"),X=n("JIr8"),G=n("LRne"),Y=n("yofV"),Z=n("STbY"),ee=n("FBzJ"),te=n("8HKz"),ne=["searchInput"];function ie(e,t){if(1&e&&(i.Tb(0),i.Qb(1,"media-image",22),i.Vb(2,"div",23),i.Jc(3),i.Ub(),i.Sb()),2&e){var n=t.ngIf;i.Cb(1),i.nc("media",n),i.Cb(2),i.Kc(n.name)}}function ae(e,t){1&e&&(i.Vb(0,"div",24),i.Jc(1,"None"),i.Ub())}function oe(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",25),i.cc("click",(function(){return i.yc(n),i.gc().clearSearchInput()})),i.Qb(1,"mat-icon",26),i.Ub()}}function re(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",16),i.cc("click",(function(){i.yc(n);var e=t.$implicit;return i.gc().selectAlbum(e)})),i.Qb(1,"media-image",22),i.Vb(2,"div",27),i.Vb(3,"div",28),i.Jc(4),i.Ub(),i.Vb(5,"div",29),i.Jc(6),i.Ub(),i.Ub(),i.Ub()}if(2&e){var a=t.$implicit;i.Cb(1),i.nc("media",a),i.Cb(3),i.Kc(a.name),i.Cb(2),i.Kc(null==a||null==a.artist?null:a.artist.name)}}function ce(e,t){1&e&&(i.Vb(0,"button",30),i.Jc(1,"No albums found."),i.Ub())}var se,le=((se=function(){function e(t){_classCallCheck(this,e),this.search=t,this.searchFormControl=new g.i,this.loading$=new a.a(!1),this.results$=new a.a([]),this.selectedAlbum$=new a.a(null),this.searchedOnce=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.bindToSearchControl()}},{key:"writeValue",value:function(e){this.selectedAlbum$.next(e)}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(){}},{key:"bindToSearchControl",value:function(){var e=this;this.searchFormControl.valueChanges.pipe(Object(K.a)(150),Object(q.a)(),Object(W.a)((function(t){return e.searchAlbums(t)})),Object(X.a)((function(){return Object(G.a)([])}))).subscribe((function(t){e.searchedOnce=!0,e.results$.next(t)}))}},{key:"searchAlbums",value:function(e){var t=this;return this.loading$.next(!0),this.search.media(e,{forceLocal:!0,limit:7,modelTypes:[Y.a]}).pipe(Object(u.a)((function(){return t.loading$.next(!1)})),Object(l.a)((function(e){return e.results.albums})))}},{key:"onMenuOpened",value:function(){this.searchedOnce||this.clearSearchInput()}},{key:"selectAlbum",value:function(e){this.selectedAlbum$.next(e),this.propagateChange(e)}},{key:"clearSearchInput",value:function(){this.searchFormControl.setValue("")}},{key:"onMenuClosed",value:function(){this.loading$.next(!1),this.clearSearchInput()}}]),e}()).\u0275fac=function(e){return new(e||se)(i.Pb(I.a))},se.\u0275cmp=i.Jb({type:se,selectors:[["album-control"]],viewQuery:function(e,t){var n;1&e&&i.Fc(ne,!0),2&e&&i.uc(n=i.dc())&&(t.searchInput=n.first)},features:[i.Bb([{provide:g.s,useExisting:se,multi:!0}])],decls:29,vars:16,consts:[[1,"many-inputs"],[1,"input-container"],["trans","",1,"fake-label"],["tabindex","0",1,"fake-input",3,"matMenuTriggerFor","menuOpened","menuClosed"],[4,"ngIf","ngIfElse"],["anyAlbum",""],[1,"arrow-container"],[1,"arrow"],[1,"add-album-control-menu"],["menu","matMenu"],[1,"input-container","search-input-container",3,"click"],[1,"search-input-wrapper"],["type","text","placeholder","Search...","mat-menu-item","","trans-placeholder","",3,"formControl","blur"],["searchInput",""],["class","clear-search-input-button","mat-icon-button","",3,"click",4,"ngIf"],[1,"small",3,"isVisible"],["mat-menu-item","",3,"click"],["default","album"],[1,"info","any-user-info"],["trans","",1,"name"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","","disabled","","trans","",4,"ngIf"],[3,"media"],[1,"title-name"],["trans","",1,"title-name"],["mat-icon-button","",1,"clear-search-input-button",3,"click"],["svgIcon","close"],[1,"user-info"],[1,"name"],[1,"email"],["mat-menu-item","","disabled","","trans",""]],template:function(e,t){if(1&e){var n=i.Wb();i.Vb(0,"div",0),i.Vb(1,"div",1),i.Vb(2,"div",2),i.Jc(3,"Album"),i.Ub(),i.Vb(4,"div",3),i.cc("menuOpened",(function(){return t.onMenuOpened()}))("menuClosed",(function(){return t.onMenuClosed()})),i.Hc(5,ie,4,2,"ng-container",4),i.hc(6,"async"),i.Hc(7,ae,2,0,"ng-template",null,5,i.Ic),i.Vb(9,"div",6),i.Qb(10,"div",7),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(11,"mat-menu",8,9),i.Vb(13,"div",10),i.cc("click",(function(e){return e.stopPropagation()})),i.Vb(14,"div",11),i.Vb(15,"input",12,13),i.cc("blur",(function(){return i.yc(n),i.vc(16).focus()})),i.Ub(),i.Hc(17,oe,2,0,"button",14),i.Qb(18,"loading-indicator",15),i.hc(19,"async"),i.Ub(),i.Ub(),i.Vb(20,"button",16),i.cc("click",(function(){return t.selectAlbum(null)})),i.Qb(21,"media-image",17),i.Vb(22,"div",18),i.Vb(23,"div",19),i.Jc(24,"No Album"),i.Ub(),i.Ub(),i.Ub(),i.Hc(25,re,7,3,"button",20),i.hc(26,"async"),i.Hc(27,ce,2,0,"button",21),i.hc(28,"async"),i.Ub()}if(2&e){var a=i.vc(8),o=i.vc(12);i.Cb(4),i.nc("matMenuTriggerFor",o),i.Cb(1),i.nc("ngIf",i.ic(6,8,t.selectedAlbum$))("ngIfElse",a),i.Cb(10),i.nc("formControl",t.searchFormControl),i.Cb(2),i.nc("ngIf",t.searchFormControl.value),i.Cb(1),i.nc("isVisible",i.ic(19,10,t.loading$)),i.Cb(7),i.nc("ngForOf",i.ic(26,12,t.results$)),i.Cb(2),i.nc("ngIf",t.searchedOnce&&!i.ic(28,14,t.results$).length)}},directives:[M.a,Z.d,V.t,Z.e,g.d,Z.b,g.u,g.j,ee.a,te.a,V.s,U.b,E.a],pipes:[V.b],styles:["[_nghost-%COMP%]{display:block;min-width:280px;max-width:100%}.fake-input[_ngcontent-%COMP%]{display:flex;align-items:center}.fake-label[_ngcontent-%COMP%]{text-transform:capitalize}.title-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}media-image[_ngcontent-%COMP%]{display:inline-block;margin-right:8px;width:35px;height:35px;flex-shrink:0;border-radius:4px;vertical-align:middle}.arrow-container[_ngcontent-%COMP%]{flex-shrink:0;padding-left:8px;margin-left:auto}.arrow[_ngcontent-%COMP%]{border-color:#000 transparent transparent;border-style:solid;border-width:5px 4px 0;height:0;width:0}  .add-album-control-menu{width:280px}.mat-menu-item[_ngcontent-%COMP%]:first-of-type{border-top:1px solid var(--be-divider-default)}.search-input-container[_ngcontent-%COMP%]{padding:2px 10px 10px}.search-input-wrapper[_ngcontent-%COMP%]{position:relative}.clear-search-input-button[_ngcontent-%COMP%]{position:absolute;top:4px;right:0;color:var(--be-secondary-text)}.mat-menu-item[_ngcontent-%COMP%]{display:flex;vertical-align:middle}.mat-menu-item.selected[_ngcontent-%COMP%]{background-color:var(--be-accent-emphasis)}.mat-menu-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:35px;flex-shrink:0}.mat-menu-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:capitalize;overflow:hidden;text-overflow:ellipsis}.mat-menu-item[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text);font-size:1.3rem;overflow:hidden;text-overflow:ellipsis}.user-info[_ngcontent-%COMP%]{line-height:normal;overflow:hidden}.any-user-info[_ngcontent-%COMP%]{line-height:35px}loading-indicator[_ngcontent-%COMP%]{position:absolute;top:12px;right:40px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}"],changeDetection:0}),se),ue=n("+Bz4"),de=n("/1cH"),pe=n("A5z7"),be=n("FKr1");function he(e,t){if(1&e){var n=i.Wb();i.Vb(0,"mat-chip",9),i.cc("removed",(function(){i.yc(n);var e=t.$implicit;return i.gc().deselectArtist(e)})),i.Qb(1,"img",10),i.Jc(2),i.Qb(3,"mat-icon",11),i.Ub()}if(2&e){var a=t.$implicit;i.nc("removable",!0),i.Cb(1),i.nc("src",a.image,i.Bc)("alt",a.name),i.Cb(1),i.Lc(" ",a.name," ")}}function me(e,t){if(1&e&&(i.Vb(0,"mat-option",12),i.Qb(1,"img",10),i.Vb(2,"span"),i.Jc(3),i.Ub(),i.Ub()),2&e){var n=t.$implicit;i.nc("value",n),i.Cb(1),i.nc("src",n.image,i.Bc)("alt",n.name+" image"),i.Cb(2),i.Kc(n.name)}}function fe(e,t){if(1&e&&(i.Vb(0,"div",13),i.Jc(1),i.Ub()),2&e){var n=i.gc();i.Cb(1),i.Kc(n.error)}}var ge,ve=((ge=function(){function e(t){_classCallCheck(this,e),this.search=t,this.searchUsers=!1,this.searchControl=new g.i,this.value$=new a.a([])}return _createClass(e,[{key:"ngOnInit",value:function(){this.bindSearchControl()}},{key:"writeValue",value:function(e){this.value$.next(e)}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(){}},{key:"deselectArtist",value:function(e){var t=this.value$.value.filter((function(t){return t.id!==e.id}));this.value$.next(t),this.propagateChange(this.value$.value)}},{key:"selectArtist",value:function(e){this.value$.next([].concat(_toConsumableArray(this.value$.value),[e])),this.propagateChange(this.value$.value)}},{key:"bindSearchControl",value:function(){var e=this;this.searchResults$=this.searchControl.valueChanges.pipe(Object(q.a)(),Object(K.a)(250),Object(W.a)((function(t){return e.findMatches(t)})))}},{key:"findMatches",value:function(e){return e&&"string"==typeof e?this.search.media(e,{limit:7,forceLocal:!0,modelTypes:[ue.a]}).pipe(Object(l.a)((function(e){return e.results.artists}))):Object(G.a)([])}},{key:"displayFn",value:function(e){return null}}]),e}()).\u0275fac=function(e){return new(e||ge)(i.Pb(I.a))},ge.\u0275cmp=i.Jb({type:ge,selectors:[["track-artist-control"]],hostAttrs:[1,"custom-control"],inputs:{error:"error",searchUsers:"searchUsers",id:"id"},features:[i.Bb([x.a,{provide:g.s,useExisting:ge,multi:!0}])],decls:12,vars:13,consts:[[1,"input-container"],["trans","",3,"for"],["type","text","placeholder","Search artists and users...","trans-placeholder","",3,"id","formControl","matAutocomplete"],[3,"selectable"],["class","chip-with-image",3,"removable","removed",4,"ngFor","ngForOf"],[1,"media-autocomplete-panel",3,"displayWith","optionSelected"],["artistAuto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"chip-with-image",3,"removable","removed"],[3,"src","alt"],["svgIcon","cancel","matChipRemove",""],[3,"value"],[1,"error"]],template:function(e,t){if(1&e&&(i.Vb(0,"div",0),i.Vb(1,"label",1),i.Jc(2,"Artists"),i.Ub(),i.Qb(3,"input",2),i.Vb(4,"mat-chip-list",3),i.Hc(5,he,4,4,"mat-chip",4),i.hc(6,"async"),i.Ub(),i.Vb(7,"mat-autocomplete",5,6),i.cc("optionSelected",(function(e){return t.selectArtist(e.option.value)})),i.Hc(9,me,4,4,"mat-option",7),i.hc(10,"async"),i.Ub(),i.Hc(11,fe,2,1,"div",8),i.Ub()),2&e){var n=i.vc(8);i.Cb(1),i.nc("for",t.id),i.Cb(2),i.nc("id",t.id)("formControl",t.searchControl)("matAutocomplete",n),i.Cb(1),i.nc("selectable",!1),i.Cb(1),i.nc("ngForOf",i.ic(6,9,t.value$)),i.Cb(2),i.nc("displayWith",t.displayFn),i.Cb(2),i.nc("ngForOf",i.ic(10,11,t.searchResults$)),i.Cb(2),i.nc("ngIf",t.error)}},directives:[M.a,g.d,de.c,g.u,g.j,pe.c,V.s,de.a,V.t,pe.a,E.a,pe.d,be.l],pipes:[V.b],styles:["[_nghost-%COMP%]{display:block}.mat-chip-list[_ngcontent-%COMP%]{display:block;margin-top:15px}.mat-standard-chip.chip-with-image[_ngcontent-%COMP%]{padding-left:0}.mat-standard-chip.chip-with-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;-o-object-fit:cover;object-fit:cover;border-radius:16px;margin-right:8px}"],changeDetection:0}),ge);function ye(e,t){if(1&e&&i.Qb(0,"track-upload-header",23),2&e){var n=i.gc(2);i.nc("upload",n.uploadQueueItem)}}function _e(e,t){if(1&e){var n=i.Wb();i.Vb(0,"div",24),i.lc(1),i.Vb(2,"div",14),i.Vb(3,"label",25),i.Jc(4,"Title"),i.Ub(),i.Qb(5,"input",26),i.Ub(),i.Vb(6,"div",27),i.Vb(7,"button",28),i.cc("click",(function(){return i.yc(n),i.gc(2).toggleExpandedState()})),i.Qb(8,"mat-icon",29),i.Ub(),i.Vb(9,"button",28),i.cc("click",(function(){return i.yc(n),i.gc(2).maybeCancel()})),i.Qb(10,"mat-icon",30),i.Ub(),i.Ub(),i.Ub()}if(2&e){var a=i.gc(2);i.nc("formGroup",a.form),i.Cb(3),i.nc("for","track-form-"+a.uniqueId+"-name"),i.Cb(2),i.nc("id","track-form-"+a.uniqueId+"-name"),i.Cb(2),i.Gb("active",a.expanded)}}function ke(e,t){1&e&&(i.Vb(0,"span",31),i.Jc(1,"Replace File"),i.Ub())}function Ce(e,t){1&e&&(i.Vb(0,"span",31),i.Jc(1,"Upload Track"),i.Ub())}function xe(e,t){if(1&e&&(i.Vb(0,"div",32),i.Jc(1),i.Ub()),2&e){var n=i.gc(2).ngIf;i.Cb(1),i.Kc(n.name)}}function Oe(e,t){if(1&e&&(i.Vb(0,"div",14),i.Vb(1,"label",15),i.Jc(2,"Title"),i.Ub(),i.Qb(3,"input",26),i.Hc(4,xe,2,1,"div",17),i.Ub()),2&e){var n=i.gc().ngIf,a=i.gc();i.Cb(1),i.nc("for","track-form-"+a.uniqueId+"-name"),i.Cb(2),i.nc("id","track-form-"+a.uniqueId+"-name"),i.Cb(1),i.nc("ngIf",n.name)}}function Pe(e,t){if(1&e&&i.Qb(0,"album-control",33),2&e){var n=i.gc(2);i.nc("id","track-form-"+n.uniqueId+"-album_id")}}function we(e,t){if(1&e&&i.Qb(0,"track-artist-control",34),2&e){var n=i.gc().ngIf,a=i.gc();i.nc("error",n.artists)("id","track-form-"+a.uniqueId+"-artists")}}function Ie(e,t){if(1&e&&(i.Vb(0,"div",32),i.Jc(1),i.Ub()),2&e){var n=i.gc().ngIf;i.Cb(1),i.Kc(n.duration)}}function Ve(e,t){if(1&e&&(i.Vb(0,"div",32),i.Jc(1),i.Ub()),2&e){var n=i.gc(2).ngIf;i.Cb(1),i.Kc(n.youtube_id)}}function Ae(e,t){if(1&e&&(i.Vb(0,"div",14),i.Vb(1,"label",15),i.Jc(2,"Youtube Video ID"),i.Ub(),i.Qb(3,"input",35),i.Hc(4,Ve,2,1,"div",17),i.Vb(5,"p"),i.Jc(6,"ID only. https://www.youtube.com/embed?v="),i.Vb(7,"strong"),i.Jc(8,"EPyh41zPg4Z"),i.Ub(),i.Ub(),i.Ub()),2&e){var n=i.gc().ngIf,a=i.gc();i.Cb(1),i.nc("for","track-form-"+a.uniqueId+"-track-youtube-id"),i.Cb(2),i.nc("id","track-form-"+a.uniqueId+"-track-youtube-id"),i.Cb(1),i.nc("ngIf",n.youtube_id)}}function Ue(e,t){if(1&e&&(i.Vb(0,"div",32),i.Jc(1),i.Ub()),2&e){var n=i.gc(2).ngIf;i.Cb(1),i.Kc(n.url)}}function Me(e,t){if(1&e&&(i.Vb(0,"div",14),i.Vb(1,"label",15),i.Jc(2,"Remote Track Url"),i.Ub(),i.Qb(3,"input",36),i.Hc(4,Ue,2,1,"div",17),i.Ub()),2&e){var n=i.gc().ngIf,a=i.gc();i.Cb(1),i.nc("for","track-form-"+a.uniqueId+"-track-url"),i.Cb(2),i.nc("id","track-form-"+a.uniqueId+"-track-url"),i.Cb(1),i.nc("ngIf",n.url)}}function Fe(e,t){if(1&e&&(i.Vb(0,"div",32),i.Jc(1),i.Ub()),2&e){var n=i.gc().ngIf;i.Cb(1),i.Kc(n.genres)}}function Te(e,t){if(1&e&&(i.Vb(0,"div",32),i.Jc(1),i.Ub()),2&e){var n=i.gc().ngIf;i.Cb(1),i.Kc(n.tags)}}function Se(e,t){if(1&e&&(i.Vb(0,"button",37),i.hc(1,"async"),i.Jc(2,"Save"),i.Ub()),2&e){var n=i.gc(2);i.nc("disabled",i.ic(1,1,n.loading$)||n.uploadQueueItem&&!n.uploadQueueItem.completed)}}function De(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",38),i.cc("click",(function(){return i.yc(n),i.gc(2).maybeCancel()})),i.Jc(1,"Cancel"),i.Ub()}}function Ee(e,t){if(1&e){var n=i.Wb();i.Vb(0,"form",1),i.cc("ngSubmit",(function(){return i.yc(n),i.gc().submit()})),i.Hc(1,ye,1,1,"track-upload-header",2),i.Hc(2,_e,11,5,"div",3),i.Vb(3,"div",4),i.Vb(4,"div",5),i.Vb(5,"div",6),i.Qb(6,"upload-image-control",7),i.hc(7,"async"),i.Vb(8,"button",8),i.cc("click",(function(){return i.yc(n),i.gc().openUploadMusicModal()})),i.Hc(9,ke,2,0,"span",9),i.Hc(10,Ce,2,0,"span",9),i.Ub(),i.Ub(),i.Vb(11,"div",10),i.Hc(12,Oe,5,3,"div",11),i.Hc(13,Pe,1,1,"album-control",12),i.Hc(14,we,1,2,"track-artist-control",13),i.Vb(15,"div",14),i.Vb(16,"label",15),i.Jc(17,"Duration (ms)"),i.Ub(),i.Qb(18,"input",16),i.Hc(19,Ie,2,1,"div",17),i.Ub(),i.Hc(20,Ae,9,3,"div",11),i.Hc(21,Me,5,3,"div",11),i.Vb(22,"div",14),i.Vb(23,"label",15),i.Jc(24,"Genres"),i.Ub(),i.Qb(25,"chip-input",18),i.Hc(26,Fe,2,1,"div",17),i.Ub(),i.Vb(27,"div",14),i.Vb(28,"label",15),i.Jc(29,"Tags"),i.Ub(),i.Qb(30,"chip-input",19),i.Hc(31,Te,2,1,"div",17),i.Ub(),i.Vb(32,"div",14),i.Vb(33,"label",15),i.Jc(34,"Description"),i.Ub(),i.Qb(35,"textarea",20),i.Ub(),i.Hc(36,Se,3,3,"button",21),i.Hc(37,De,2,0,"button",22),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){var a=t.ngIf,o=i.gc();i.nc("formGroup",o.form),i.Cb(1),i.nc("ngIf",o.uploadQueueItem),i.Cb(1),i.nc("ngIf",o.albumForm),i.Cb(1),i.nc("@bodyExpansion",o.getExpandedState()),i.Cb(1),i.Gb("inside-album",o.albumForm),i.Cb(2),i.nc("defaultBackground",i.ic(7,29,o.defaultImage$)),i.Cb(3),i.nc("ngIf",o.track),i.Cb(1),i.nc("ngIf",!o.track),i.Cb(2),i.nc("ngIf",!o.albumForm),i.Cb(1),i.nc("ngIf",!o.albumForm&&("artist"===o.settings.get("player.artist_type")||o.insideAdmin())),i.Cb(1),i.nc("ngIf","artist"===o.settings.get("player.artist_type")||o.insideAdmin()),i.Cb(2),i.nc("for","track-form-"+o.uniqueId+"-duration"),i.Cb(2),i.nc("id","track-form-"+o.uniqueId+"-duration"),i.Cb(1),i.nc("ngIf",a.duration),i.Cb(1),i.nc("ngIf",o.insideAdmin()),i.Cb(1),i.nc("ngIf",o.insideAdmin()),i.Cb(2),i.nc("for","track-form-"+o.uniqueId+"-track-genres"),i.Cb(2),i.nc("id","track-form-"+o.uniqueId+"-track-genres")("suggestFn",o.suggestGenreFn),i.Cb(1),i.nc("ngIf",a.genres),i.Cb(2),i.nc("for","track-form-"+o.uniqueId+"-track-tags"),i.Cb(2),i.nc("id","track-form-"+o.uniqueId+"-track-tags")("suggestFn",o.suggestTagFn),i.Cb(1),i.nc("ngIf",a.tags),i.Cb(2),i.nc("for","track-form-"+o.uniqueId+"-track-description"),i.Cb(2),i.nc("id","track-form-"+o.uniqueId+"-track-description"),i.Cb(1),i.nc("ngIf",!o.albumForm),i.Cb(1),i.nc("ngIf",!o.albumForm&&!o.track)}}var je,Qe=["*"],Re=((je=function(){function e(t,n,r,c,s,u,d,p,b,m,g,v){var y=this;_classCallCheck(this,e),this.fb=t,this.currentUser=n,this.tracks=r,this.toast=c,this.modal=s,this.audioValidator=u,this.uploadQueue=d,this.waveGenerator=p,this.router=b,this.settings=m,this.cd=g,this.search=v,this.autoMatch=!1,this.canceled=new i.o,this.saved=new i.o,this.errors$=new a.a({}),this.defaultImage$=new a.a(o.a.album),this.loading$=new a.a(!1),this.uniqueId=Object(h.a)(5),this.form=this.fb.group({id:[null],name:[""],image:[""],description:[""],number:[1],tags:[[]],genres:[[]],duration:[null],url:[""],youtube_id:[""],spotify_popularity:[""],local_only:[!0],album:[null],artists:[[]],waveData:[null]}),this.expanded=!1,this.suggestTagFn=function(e){return y.search.media(e,{modelTypes:["App\\Tag"],limit:5}).pipe(Object(l.a)((function(e){return e.results.tags.map((function(e){return e.name}))})))},this.suggestGenreFn=function(e){return y.search.media(e,{modelTypes:[f.a],limit:5}).pipe(Object(l.a)((function(e){return e.results.genres.map((function(e){return e.name}))})))}}return _createClass(e,[{key:"ngOnChanges",value:function(e){e.number&&null!=e.number.currentValue&&this.form.patchValue({number:e.number.currentValue})}},{key:"ngOnInit",value:function(){var e=this;if(this.expanded=!this.albumForm,this.track){var t=Object.assign({},this.track);t.tags=(this.track.tags||[]).map((function(e){return e.name})),t.genres=(this.track.genres||[]).map((function(e){return e.display_name||e.name})),this.form.patchValue(t),this.track.album&&this.defaultImage$.next(this.track.album.image||o.a.album)}this.uploadQueueItem&&this.uploadQueueItem.uploadedResponse$.subscribe((function(t){e.patchFormUsingFileUpload(t)})),this.albumForm&&this.albumForm.get("image").valueChanges.subscribe((function(t){e.defaultImage$.next(t||o.a.album)}))}},{key:"getPayload",value:function(){var e=this.uploadQueueItem?this.uploadQueueItem.customData:{},t=Object.assign(Object.assign({},this.form.value),e);return t.artists.length||"user"!==this.settings.get("player.artist_type")||(t.artists=[{id:this.currentUser.get("id"),artist_type:r.a}]),t}},{key:"isUploading",value:function(){return this.uploadQueueItem&&!this.uploadQueueItem.completed}},{key:"submit",value:function(){var e=this;if(!this.albumForm){this.loading$.next(!0);var t=this.getPayload();(this.track?this.tracks.update(this.track.id,t):this.tracks.create(t)).pipe(Object(u.a)((function(){return e.loading$.next(!1)}))).subscribe((function(t){e.uploadQueueItem&&e.uploadQueue.remove(e.uploadQueueItem.id),e.toast.open("Track saved."),e.form.markAsPristine(),e.saved.emit(t.track)}),(function(t){e.errors$.next(t.errors),Object(m.a)(e.errors$.value,"track-form-"+e.uniqueId)}))}}},{key:"toggleExpandedState",value:function(){this.expanded=!this.expanded}},{key:"getExpandedState",value:function(){return this.expanded?"expanded":"collapsed"}},{key:"maybeCancel",value:function(){var e=this;this.modal.show(s.a,{title:"Remove Track",body:"Are you sure you want to cancel the upload and remove this track?",ok:"Remove"}).beforeClosed().subscribe((function(t){t&&(e.uploadQueueItem?(e.uploadQueue.remove(e.uploadQueueItem.id),e.canceled.emit(e.uploadQueueItem),e.toast.open("Upload canceled.")):e.track&&e.tracks.delete([e.track.id]).subscribe((function(){e.canceled.emit(e.track),e.toast.open("Track deleted.")})))}))}},{key:"openUploadMusicModal",value:function(){var e=this,t={uri:"uploads",validator:this.audioValidator,httpParams:{autoMatch:this.autoMatch,diskPrefix:"track_media",disk:"public"},willProcessFiles:!0};Object(d.a)({types:[p.a.audio,p.a.video]}).then((function(n){n&&(e.uploadQueue.start(e.uploadQueueItem?_defineProperty({},e.uploadQueueItem.id,n[0]):n,t).subscribe((function(t){var n=e.uploadQueue.find(t.queueItemId);e.waveGenerator.generate(n.uploadedFile.native).then((function(t){e.form.patchValue({waveData:t}),n.finishProcessing()})),e.patchFormUsingFileUpload(t),e.toast.open("Track uploaded.")}),(function(){return e.toast.open("Could not upload track")})),e.uploadQueueItem||(e.uploadQueueItem=e.uploadQueue.uploads$.value[0],e.cd.markForCheck()))}))}},{key:"patchFormUsingFileUpload",value:function(e){var t={name:e.metadata.title,duration:e.metadata.duration,url:e.fileEntry.url,genres:e.metadata.genres||[],description:e.metadata.comment};e.metadata.album&&(t.album=e.metadata.album),e.metadata.artist&&(t.artists=[e.metadata.artist],this.albumForm&&!this.albumForm.value.artist&&this.albumForm.patchValue({artist:e.metadata.artist})),e.metadata.image&&(t.image=e.metadata.image.url,this.albumForm&&!this.albumForm.value.image&&this.albumForm.patchValue({image:e.metadata.image.url})),e.metadata.release_date&&this.albumForm&&!this.albumForm.value.release_date&&this.albumForm.patchValue({release_date:e.metadata.release_date}),this.form.patchValue(t)}},{key:"insideAdmin",value:function(){return this.router.url.indexOf("admin")>-1}},{key:"shouldShowDurationField",value:function(){var e=this.form.get("url").value;return!e||Object(b.a)(e)}}]),e}()).\u0275fac=function(e){return new(e||je)(i.Pb(g.h),i.Pb(v.a),i.Pb(y.a),i.Pb(_.a),i.Pb(k.a),i.Pb(C.a),i.Pb(x.a),i.Pb(O.c),i.Pb(P.e),i.Pb(w.a),i.Pb(i.h),i.Pb(I.a))},je.\u0275cmp=i.Jb({type:je,selectors:[["track-form"]],inputs:{autoMatch:"autoMatch",track:"track",uploadQueueItem:"uploadQueueItem",albumForm:"albumForm",number:"number"},outputs:{canceled:"canceled",saved:"saved"},features:[i.Ab],ngContentSelectors:Qe,decls:2,vars:3,consts:[["class","many-inputs",3,"formGroup","ngSubmit",4,"ngIf"],[1,"many-inputs",3,"formGroup","ngSubmit"],[3,"upload",4,"ngIf"],["class","inline-form",3,"formGroup",4,"ngIf"],[1,"full-form"],[1,"full-form-container"],[1,"left-column"],["formControlName","image","uploadType","track_image",3,"defaultBackground"],["mat-flat-button","","color","accent","type","button",1,"left-column-action-button",3,"click"],["trans","",4,"ngIf"],[1,"many-inputs","fields-container"],["class","input-container",4,"ngIf"],["formControlName","album",3,"id",4,"ngIf"],["formControlName","artists",3,"error","id",4,"ngIf"],[1,"input-container"],["trans","",3,"for"],["type","number","formControlName","duration","min","1","required","",3,"id"],["class","error",4,"ngIf"],["placeholder","+Add genre","formControlName","genres",3,"id","suggestFn"],["placeholder","+Add tag","formControlName","tags",3,"id","suggestFn"],["type","text","formControlName","description","minlength","10","maxlength","999","rows","5",3,"id"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled",4,"ngIf"],["type","button","mat-button","","trans","",3,"click",4,"ngIf"],[3,"upload"],[1,"inline-form",3,"formGroup"],["trans","",1,"hidden",3,"for"],["type","text","formControlName","name","required","",3,"id"],[1,"actions"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","delete"],["trans",""],[1,"error"],["formControlName","album",3,"id"],["formControlName","artists",3,"error","id"],["type","text","formControlName","youtube_id","minlength","1","maxlength","30",3,"id"],["type","url","formControlName","url","minlength","1","maxlength","191",3,"id"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["type","button","mat-button","","trans","",3,"click"]],template:function(e,t){1&e&&(i.mc(),i.Hc(0,Ee,38,31,"form",0),i.hc(1,"async")),2&e&&i.nc("ngIf",i.ic(1,1,t.errors$))},directives:[V.t,g.K,g.v,g.m,A.a,g.u,g.k,U.b,M.a,g.A,g.d,g.F,F.a,g.q,g.p,N,E.a,le,ve],pipes:[V.b],styles:["[_nghost-%COMP%]{display:block}.inline-form[_ngcontent-%COMP%]{display:flex}.inline-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{flex-shrink:0;color:var(--be-secondary-text);margin-left:20px}.full-form[_ngcontent-%COMP%]{overflow:hidden}.full-form-container[_ngcontent-%COMP%]{display:flex}.full-form-container.inside-album[_ngcontent-%COMP%]{margin:25px 100px 0 60px}.fields-container[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:20px;min-width:0}.cdk-drag-handle[_ngcontent-%COMP%]{flex-shrink:0;color:var(--be-secondary-text);margin-right:20px}.active[_ngcontent-%COMP%]{color:var(--be-accent-default)}track-upload-header[_ngcontent-%COMP%]{margin-bottom:15px}.drag-handle[_ngcontent-%COMP%]{cursor:move}.left-column-action-button[_ngcontent-%COMP%]{margin-top:15px;width:100%;line-height:40px}"],data:{animation:[c.g.bodyExpansion]},changeDetection:0}),je)},"/1cH":function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return L})),n.d(t,"c",(function(){return R}));var i=n("u47x"),a=n("8LU1"),o=n("fXoL"),r=n("FKr1"),c=n("quSY"),s=n("XNiG"),l=n("NXyV"),u=n("VRyK"),d=n("LRne"),p=n("xgIS"),b=n("ofXK"),h=n("rDax"),m=n("vxfF"),f=n("FtGj"),g=n("nLfN"),v=n("+rOU"),y=n("3Pt+"),_=n("kmnG"),k=n("IzEk"),C=n("eIep"),x=n("pLZG"),O=n("lJxs"),P=n("vkgz"),w=n("3E0/"),I=n("cH1L"),V=["panel"];function A(e,t){if(1&e&&(o.Vb(0,"div",0,1),o.lc(2),o.Ub()),2&e){var n=o.gc();o.nc("id",n.id)("ngClass",n._classList)}}var U=["*"],M=0,F=function e(t,n){_classCallCheck(this,e),this.source=t,this.option=n},T=Object(r.w)((function e(){_classCallCheck(this,e)})),S=new o.s("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}}),D=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,a){var r;return _classCallCheck(this,n),(r=t.call(this))._changeDetectorRef=e,r._elementRef=i,r._activeOptionChanges=c.a.EMPTY,r.showPanel=!1,r._isOpen=!1,r.displayWith=null,r.optionSelected=new o.o,r.opened=new o.o,r.closed=new o.o,r.optionActivated=new o.o,r._classList={},r.id="mat-autocomplete-"+M++,r._autoActiveFirstOption=!!a.autoActiveFirstOption,r}return _createClass(n,[{key:"ngAfterContentInit",value:function(){var e=this;this._keyManager=new i.b(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe((function(t){e.optionActivated.emit({source:e,option:e.options.toArray()[t]||null})})),this._setVisibility()}},{key:"ngOnDestroy",value:function(){this._activeOptionChanges.unsubscribe()}},{key:"_setScrollTop",value:function(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}},{key:"_getScrollTop",value:function(){return this.panel?this.panel.nativeElement.scrollTop:0}},{key:"_setVisibility",value:function(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}},{key:"_emitSelectEvent",value:function(e){var t=new F(this,e);this.optionSelected.emit(t)}},{key:"_setVisibilityClasses",value:function(e){e["mat-autocomplete-visible"]=this.showPanel,e["mat-autocomplete-hidden"]=!this.showPanel}},{key:"isOpen",get:function(){return this._isOpen&&this.showPanel}},{key:"autoActiveFirstOption",get:function(){return this._autoActiveFirstOption},set:function(e){this._autoActiveFirstOption=Object(a.c)(e)}},{key:"classList",set:function(e){this._classList=e&&e.length?e.split(" ").reduce((function(e,t){return e[t.trim()]=!0,e}),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}}]),n}(T);return e.\u0275fac=function(t){return new(t||e)(o.Pb(o.h),o.Pb(o.l),o.Pb(S))},e.\u0275cmp=o.Jb({type:e,selectors:[["mat-autocomplete"]],contentQueries:function(e,t,n){var i;1&e&&(o.Ib(n,r.l,!0),o.Ib(n,r.k,!0)),2&e&&(o.uc(i=o.dc())&&(t.options=i),o.uc(i=o.dc())&&(t.optionGroups=i))},viewQuery:function(e,t){var n;1&e&&(o.Fc(o.O,!0),o.Pc(V,!0)),2&e&&(o.uc(n=o.dc())&&(t.template=n.first),o.uc(n=o.dc())&&(t.panel=n.first))},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple",displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",classList:["class","classList"],panelWidth:"panelWidth"},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[o.Bb([{provide:r.g,useExisting:e}]),o.zb],ngContentSelectors:U,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,t){1&e&&(o.mc(),o.Hc(0,A,3,2,"ng-template"))},directives:[b.q],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),e}(),E=new o.s("mat-autocomplete-scroll-strategy"),j={provide:E,deps:[h.c],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},Q={provide:y.s,useExisting:Object(o.W)((function(){return R})),multi:!0},R=function(){var e=function(){function e(t,n,i,a,o,r,d,p,b,h){var m=this;_classCallCheck(this,e),this._element=t,this._overlay=n,this._viewContainerRef=i,this._zone=a,this._changeDetectorRef=o,this._dir=d,this._formField=p,this._document=b,this._viewportRuler=h,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=c.a.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new s.a,this._windowBlurHandler=function(){m._canOpenOnNextFocus=m._document.activeElement!==m._element.nativeElement||m.panelOpen},this._onChange=function(){},this._onTouched=function(){},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=Object(l.a)((function(){return m.autocomplete&&m.autocomplete.options?Object(u.a).apply(void 0,_toConsumableArray(m.autocomplete.options.map((function(e){return e.onSelectionChange})))):m._zone.onStable.asObservable().pipe(Object(k.a)(1),Object(C.a)((function(){return m.optionSelections})))})),this._scrollStrategy=r}return _createClass(e,[{key:"ngAfterViewInit",value:function(){var e=this,t=this._getWindow();void 0!==t&&this._zone.runOutsideAngular((function(){return t.addEventListener("blur",e._windowBlurHandler)}))}},{key:"ngOnChanges",value:function(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}},{key:"ngOnDestroy",value:function(){var e=this._getWindow();void 0!==e&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}},{key:"openPanel",value:function(){this._attachOverlay(),this._floatLabel()}},{key:"closePanel",value:function(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}},{key:"updatePosition",value:function(){this._overlayAttached&&this._overlayRef.updatePosition()}},{key:"_getOutsideClickStream",value:function(){var e=this;return Object(u.a)(Object(p.a)(this._document,"click"),Object(p.a)(this._document,"touchend")).pipe(Object(x.a)((function(t){var n=e._isInsideShadowRoot&&t.composedPath?t.composedPath()[0]:t.target,i=e._formField?e._formField._elementRef.nativeElement:null;return e._overlayAttached&&n!==e._element.nativeElement&&(!i||!i.contains(n))&&!!e._overlayRef&&!e._overlayRef.overlayElement.contains(n)})))}},{key:"writeValue",value:function(e){var t=this;Promise.resolve(null).then((function(){return t._setTriggerValue(e)}))}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this._element.nativeElement.disabled=e}},{key:"_handleKeydown",value:function(e){var t=e.keyCode;if(t===f.g&&e.preventDefault(),this.activeOption&&t===f.f&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){var n=this.autocomplete._keyManager.activeItem,i=t===f.p||t===f.d;this.panelOpen||t===f.o?this.autocomplete._keyManager.onKeydown(e):i&&this._canOpen()&&this.openPanel(),(i||this.autocomplete._keyManager.activeItem!==n)&&this._scrollToOption()}}},{key:"_handleInput",value:function(e){var t=e.target,n=t.value;"number"===t.type&&(n=""==n?null:parseFloat(n)),this._previousValue!==n&&(this._previousValue=n,this._onChange(n),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}},{key:"_handleFocus",value:function(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}},{key:"_floatLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}},{key:"_resetLabel",value:function(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}},{key:"_scrollToOption",value:function(){var e=this.autocomplete._keyManager.activeItemIndex||0,t=Object(r.t)(e,this.autocomplete.options,this.autocomplete.optionGroups);if(0===e&&1===t)this.autocomplete._setScrollTop(0);else{var n=Object(r.u)(e+t,48,this.autocomplete._getScrollTop(),256);this.autocomplete._setScrollTop(n)}}},{key:"_subscribeToClosingActions",value:function(){var e=this,t=this._zone.onStable.asObservable().pipe(Object(k.a)(1)),n=this.autocomplete.options.changes.pipe(Object(P.a)((function(){return e._positionStrategy.reapplyLastPosition()})),Object(w.a)(0));return Object(u.a)(t,n).pipe(Object(C.a)((function(){var t=e.panelOpen;return e._resetActiveItem(),e.autocomplete._setVisibility(),e.panelOpen&&(e._overlayRef.updatePosition(),t!==e.panelOpen&&e.autocomplete.opened.emit()),e.panelClosingActions})),Object(k.a)(1)).subscribe((function(t){return e._setValueAndClose(t)}))}},{key:"_destroyPanel",value:function(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}},{key:"_setTriggerValue",value:function(e){var t=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e,n=null!=t?t:"";this._formField?this._formField._control.value=n:this._element.nativeElement.value=n,this._previousValue=n}},{key:"_setValueAndClose",value:function(e){e&&e.source&&(this._clearPreviousSelectedOption(e.source),this._setTriggerValue(e.source.value),this._onChange(e.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(e.source)),this.closePanel()}},{key:"_clearPreviousSelectedOption",value:function(e){this.autocomplete.options.forEach((function(t){t!=e&&t.selected&&t.deselect()}))}},{key:"_attachOverlay",value:function(){var e=this;if(!this.autocomplete)throw Error("Attempting to open an undefined instance of `mat-autocomplete`. Make sure that the id passed to the `matAutocomplete` is correct and that you're attempting to open it after the ngAfterContentInit hook.");null==this._isInsideShadowRoot&&(this._isInsideShadowRoot=!!Object(g.c)(this._element.nativeElement));var t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new v.i(this.autocomplete.template,this._viewContainerRef),t=this._overlay.create(this._getOverlayConfig()),this._overlayRef=t,t.keydownEvents().subscribe((function(t){(t.keyCode===f.g||t.keyCode===f.p&&t.altKey)&&(e._resetActiveItem(),e._closeKeyEventStream.next(),t.stopPropagation(),t.preventDefault())})),this._viewportSubscription=this._viewportRuler.change().subscribe((function(){e.panelOpen&&t&&t.updateSize({width:e._getPanelWidth()})}))),t&&!t.hasAttached()&&(t.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());var n=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&n!==this.panelOpen&&this.autocomplete.opened.emit()}},{key:"_getOverlayConfig",value:function(){return new h.d({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir})}},{key:"_getOverlayPosition",value:function(){var e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}},{key:"_setStrategyPositions",value:function(e){var t,n=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-autocomplete-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-autocomplete-panel-above"}];t="above"===this.position?i:"below"===this.position?n:[].concat(n,i),e.withPositions(t)}},{key:"_getConnectedElement",value:function(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}},{key:"_getPanelWidth",value:function(){return this.autocomplete.panelWidth||this._getHostWidth()}},{key:"_getHostWidth",value:function(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}},{key:"_resetActiveItem",value:function(){this.autocomplete._keyManager.setActiveItem(this.autocomplete.autoActiveFirstOption?0:-1)}},{key:"_canOpen",value:function(){var e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}},{key:"_getWindow",value:function(){var e;return(null===(e=this._document)||void 0===e?void 0:e.defaultView)||window}},{key:"autocompleteDisabled",get:function(){return this._autocompleteDisabled},set:function(e){this._autocompleteDisabled=Object(a.c)(e)}},{key:"panelOpen",get:function(){return this._overlayAttached&&this.autocomplete.showPanel}},{key:"panelClosingActions",get:function(){var e=this;return Object(u.a)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Object(x.a)((function(){return e._overlayAttached}))),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Object(x.a)((function(){return e._overlayAttached}))):Object(d.a)()).pipe(Object(O.a)((function(e){return e instanceof r.n?e:null})))}},{key:"activeOption",get:function(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Pb(o.l),o.Pb(h.c),o.Pb(o.S),o.Pb(o.B),o.Pb(o.h),o.Pb(E),o.Pb(I.c,8),o.Pb(_.a,9),o.Pb(b.e,8),o.Pb(m.e))},e.\u0275dir=o.Kb({type:e,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,t){1&e&&o.cc("focusin",(function(){return t._handleFocus()}))("blur",(function(){return t._onTouched()}))("input",(function(e){return t._handleInput(e)}))("keydown",(function(e){return t._handleKeydown(e)})),2&e&&o.Db("autocomplete",t.autocompleteAttribute)("role",t.autocompleteDisabled?null:"combobox")("aria-autocomplete",t.autocompleteDisabled?null:"list")("aria-activedescendant",t.panelOpen&&t.activeOption?t.activeOption.id:null)("aria-expanded",t.autocompleteDisabled?null:t.panelOpen.toString())("aria-owns",t.autocompleteDisabled||!t.panelOpen||null==t.autocomplete?null:t.autocomplete.id)("aria-haspopup",!t.autocompleteDisabled)},inputs:{position:["matAutocompletePosition","position"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"],autocomplete:["matAutocomplete","autocomplete"],connectedTo:["matAutocompleteConnectedTo","connectedTo"]},exportAs:["matAutocompleteTrigger"],features:[o.Bb([Q]),o.Ab]}),e}(),L=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},providers:[j],imports:[[r.m,h.f,r.i,b.c],m.b,r.m,r.i]}),e}()},"/Sbb":function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.keys(e)[0];if(n){t&&(n="".concat(t,"-").concat(n));var i=document.getElementById(n);i&&i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}n.d(t,"a",(function(){return i}))},"1jcm":function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return C}));var i=n("GU7r"),a=n("fXoL"),o=n("FKr1"),r=n("8LU1"),c=n("3Pt+"),s=n("R1ws"),l=n("u47x"),u=["thumbContainer"],d=["toggleBar"],p=["input"],b=function(){return{enterDuration:150}},h=["*"],m=new a.s("mat-slide-toggle-default-options",{providedIn:"root",factory:function(){return{disableToggleValue:!1}}}),f=0,g={provide:c.s,useExisting:Object(a.W)((function(){return _})),multi:!0},v=function e(t,n){_classCallCheck(this,e),this.source=t,this.checked=n},y=Object(o.A)(Object(o.v)(Object(o.w)(Object(o.x)((function e(t){_classCallCheck(this,e),this._elementRef=t}))),"accent")),_=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r,c,s){var l;return _classCallCheck(this,n),(l=t.call(this,e))._focusMonitor=i,l._changeDetectorRef=o,l.defaults=c,l._animationMode=s,l._onChange=function(e){},l._onTouched=function(){},l._uniqueId="mat-slide-toggle-"+ ++f,l._required=!1,l._checked=!1,l.name=null,l.id=l._uniqueId,l.labelPosition="after",l.ariaLabel=null,l.ariaLabelledby=null,l.change=new a.o,l.toggleChange=new a.o,l.tabIndex=parseInt(r)||0,l}return _createClass(n,[{key:"ngAfterContentInit",value:function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe((function(t){"keyboard"===t||"program"===t?e._inputElement.nativeElement.focus():t||Promise.resolve().then((function(){return e._onTouched()}))}))}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"_onChangeEvent",value:function(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}},{key:"_onInputClick",value:function(e){e.stopPropagation()}},{key:"writeValue",value:function(e){this.checked=!!e}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this._changeDetectorRef.markForCheck()}},{key:"focus",value:function(e){this._focusMonitor.focusVia(this._inputElement,"keyboard",e)}},{key:"toggle",value:function(){this.checked=!this.checked,this._onChange(this.checked)}},{key:"_emitChangeEvent",value:function(){this._onChange(this.checked),this.change.emit(new v(this,this.checked))}},{key:"_onLabelTextChange",value:function(){this._changeDetectorRef.detectChanges()}},{key:"required",get:function(){return this._required},set:function(e){this._required=Object(r.c)(e)}},{key:"checked",get:function(){return this._checked},set:function(e){this._checked=Object(r.c)(e),this._changeDetectorRef.markForCheck()}},{key:"inputId",get:function(){return(this.id||this._uniqueId)+"-input"}}]),n}(y);return e.\u0275fac=function(t){return new(t||e)(a.Pb(a.l),a.Pb(l.h),a.Pb(a.h),a.ac("tabindex"),a.Pb(m),a.Pb(s.a,8))},e.\u0275cmp=a.Jb({type:e,selectors:[["mat-slide-toggle"]],viewQuery:function(e,t){var n;1&e&&(a.Pc(u,!0),a.Pc(d,!0),a.Pc(p,!0)),2&e&&(a.uc(n=a.dc())&&(t._thumbEl=n.first),a.uc(n=a.dc())&&(t._thumbBarEl=n.first),a.uc(n=a.dc())&&(t._inputElement=n.first))},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,t){2&e&&(a.Yb("id",t.id),a.Db("tabindex",t.disabled?null:-1)("aria-label",null)("aria-labelledby",null),a.Gb("mat-checked",t.checked)("mat-disabled",t.disabled)("mat-slide-toggle-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[a.Bb([g]),a.zb],ngContentSelectors:h,decls:16,vars:18,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,t){if(1&e&&(a.mc(),a.Vb(0,"label",0,1),a.Vb(2,"div",2,3),a.Vb(4,"input",4,5),a.cc("change",(function(e){return t._onChangeEvent(e)}))("click",(function(e){return t._onInputClick(e)})),a.Ub(),a.Vb(6,"div",6,7),a.Qb(8,"div",8),a.Vb(9,"div",9),a.Qb(10,"div",10),a.Ub(),a.Ub(),a.Ub(),a.Vb(11,"span",11,12),a.cc("cdkObserveContent",(function(){return t._onLabelTextChange()})),a.Vb(13,"span",13),a.Jc(14,"\xa0"),a.Ub(),a.lc(15),a.Ub(),a.Ub()),2&e){var n=a.vc(1),i=a.vc(12);a.Db("for",t.inputId),a.Cb(2),a.Gb("mat-slide-toggle-bar-no-side-margin",!i.textContent||!i.textContent.trim()),a.Cb(2),a.nc("id",t.inputId)("required",t.required)("tabIndex",t.tabIndex)("checked",t.checked)("disabled",t.disabled),a.Db("name",t.name)("aria-checked",t.checked.toString())("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),a.Cb(5),a.nc("matRippleTrigger",n)("matRippleDisabled",t.disableRipple||t.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",a.qc(17,b))}},directives:[o.q,i.a],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),e}(),k=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)}}),e}(),C=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[k,o.r,o.i,i.d],k,o.i]}),e}()},"2zME":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("sJvS"),a=n("tU2R"),o=n("PCqb"),r=n("JWVf"),c=n("fXoL"),s=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).DEFAULT_MAX_SIZE_MB=50,e.showToast=!0,e}return _createClass(n,[{key:"initValidations",value:function(){var e,t=[new a.a({maxSize:this.getMaxFileSize()},this.i18n),new r.a({types:["audio","video"]},this.i18n)];(e=this.validations).push.apply(e,t)}},{key:"getMaxFileSize",value:function(){return this.settings.get("uploads.max_size",Object(o.a)(this.DEFAULT_MAX_SIZE_MB,"MB"))}}]),n}(i.a);return e.\u0275fac=function(t){return l(t||e)},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),l=c.Xb(s)},"7EHt":function(e,t,n){"use strict";n.d(t,"a",(function(){return X})),n.d(t,"b",(function(){return G})),n.d(t,"c",(function(){return N})),n.d(t,"d",(function(){return K})),n.d(t,"e",(function(){return q})),n.d(t,"f",(function(){return W})),n.d(t,"g",(function(){return H}));var i,a,o,r=n("fXoL"),c=n("8LU1"),s=n("XNiG"),l=n("quSY"),u=n("0EQZ"),d=0,p=((o=function(){function e(){_classCallCheck(this,e),this._stateChanges=new s.a,this._openCloseAllActions=new s.a,this.id="cdk-accordion-"+d++,this._multi=!1}return _createClass(e,[{key:"openAll",value:function(){this._openCloseAll(!0)}},{key:"closeAll",value:function(){this._openCloseAll(!1)}},{key:"ngOnChanges",value:function(e){this._stateChanges.next(e)}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"_openCloseAll",value:function(e){this.multi&&this._openCloseAllActions.next(e)}},{key:"multi",get:function(){return this._multi},set:function(e){this._multi=Object(c.c)(e)}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275dir=r.Kb({type:o,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[r.Ab]}),o),b=0,h=((a=function(){function e(t,n,i){var a=this;_classCallCheck(this,e),this.accordion=t,this._changeDetectorRef=n,this._expansionDispatcher=i,this._openCloseAllSubscription=l.a.EMPTY,this.closed=new r.o,this.opened=new r.o,this.destroyed=new r.o,this.expandedChange=new r.o,this.id="cdk-accordion-child-"+b++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=function(){},this._removeUniqueSelectionListener=i.listen((function(e,t){a.accordion&&!a.accordion.multi&&a.accordion.id===t&&a.id!==e&&(a.expanded=!1)})),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}},{key:"toggle",value:function(){this.disabled||(this.expanded=!this.expanded)}},{key:"close",value:function(){this.disabled||(this.expanded=!1)}},{key:"open",value:function(){this.disabled||(this.expanded=!0)}},{key:"_subscribeToOpenCloseAllActions",value:function(){var e=this;return this.accordion._openCloseAllActions.subscribe((function(t){e.disabled||(e.expanded=t)}))}},{key:"expanded",get:function(){return this._expanded},set:function(e){e=Object(c.c)(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(c.c)(e)}}]),e}()).\u0275fac=function(e){return new(e||a)(r.Pb(p,12),r.Pb(r.h),r.Pb(u.d))},a.\u0275dir=r.Kb({type:a,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[r.Bb([{provide:p,useValue:void 0}])]}),a),m=((i=function e(){_classCallCheck(this,e)}).\u0275mod=r.Nb({type:i}),i.\u0275inj=r.Mb({factory:function(e){return new(e||i)}}),i),f=n("+rOU"),g=n("ofXK"),v=n("u47x"),y=n("FtGj"),_=n("/uUt"),k=n("JX91"),C=n("pLZG"),x=n("IzEk"),O=n("R1ws"),P=n("EY2u"),w=n("VRyK"),I=n("R0Ic"),V=["body"];function A(e,t){}var U=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],M=["mat-expansion-panel-header","*","mat-action-row"];function F(e,t){if(1&e&&r.Qb(0,"span",2),2&e){var n=r.gc();r.nc("@indicatorRotate",n._getExpandedState())}}var T,S,D,E,j,Q,R=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],L=["mat-panel-title","mat-panel-description","*"],$=new r.s("MAT_ACCORDION"),H={indicatorRotate:Object(I.n)("indicatorRotate",[Object(I.k)("collapsed, void",Object(I.l)({transform:"rotate(0deg)"})),Object(I.k)("expanded",Object(I.l)({transform:"rotate(180deg)"})),Object(I.m)("expanded <=> collapsed, void => collapsed",Object(I.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),bodyExpansion:Object(I.n)("bodyExpansion",[Object(I.k)("collapsed, void",Object(I.l)({height:"0px",visibility:"hidden"})),Object(I.k)("expanded",Object(I.l)({height:"*",visibility:"visible"})),Object(I.m)("expanded <=> collapsed, void => collapsed",Object(I.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))])},J=((T=function e(t){_classCallCheck(this,e),this._template=t}).\u0275fac=function(e){return new(e||T)(r.Pb(r.O))},T.\u0275dir=r.Kb({type:T,selectors:[["ng-template","matExpansionPanelContent",""]]}),T),z=0,B=new r.s("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),N=((Q=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,a,o,c,l,u){var d;return _classCallCheck(this,n),(d=t.call(this,e,i,a))._viewContainerRef=o,d._animationMode=l,d._hideToggle=!1,d.afterExpand=new r.o,d.afterCollapse=new r.o,d._inputChanges=new s.a,d._headerId="mat-expansion-panel-header-"+z++,d._bodyAnimationDone=new s.a,d.accordion=e,d._document=c,d._bodyAnimationDone.pipe(Object(_.a)((function(e,t){return e.fromState===t.fromState&&e.toState===t.toState}))).subscribe((function(e){"void"!==e.fromState&&("expanded"===e.toState?d.afterExpand.emit():"collapsed"===e.toState&&d.afterCollapse.emit())})),u&&(d.hideToggle=u.hideToggle),d}return _createClass(n,[{key:"_hasSpacing",value:function(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}},{key:"_getExpandedState",value:function(){return this.expanded?"expanded":"collapsed"}},{key:"toggle",value:function(){this.expanded=!this.expanded}},{key:"close",value:function(){this.expanded=!1}},{key:"open",value:function(){this.expanded=!0}},{key:"ngAfterContentInit",value:function(){var e=this;this._lazyContent&&this.opened.pipe(Object(k.a)(null),Object(C.a)((function(){return e.expanded&&!e._portal})),Object(x.a)(1)).subscribe((function(){e._portal=new f.i(e._lazyContent._template,e._viewContainerRef)}))}},{key:"ngOnChanges",value:function(e){this._inputChanges.next(e)}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this),this._bodyAnimationDone.complete(),this._inputChanges.complete()}},{key:"_containsFocus",value:function(){if(this._body){var e=this._document.activeElement,t=this._body.nativeElement;return e===t||t.contains(e)}return!1}},{key:"hideToggle",get:function(){return this._hideToggle||this.accordion&&this.accordion.hideToggle},set:function(e){this._hideToggle=Object(c.c)(e)}},{key:"togglePosition",get:function(){return this._togglePosition||this.accordion&&this.accordion.togglePosition},set:function(e){this._togglePosition=e}}]),n}(h)).\u0275fac=function(e){return new(e||Q)(r.Pb($,12),r.Pb(r.h),r.Pb(u.d),r.Pb(r.S),r.Pb(g.e),r.Pb(O.a,8),r.Pb(B,8))},Q.\u0275cmp=r.Jb({type:Q,selectors:[["mat-expansion-panel"]],contentQueries:function(e,t,n){var i;1&e&&r.Ib(n,J,!0),2&e&&r.uc(i=r.dc())&&(t._lazyContent=i.first)},viewQuery:function(e,t){var n;1&e&&r.Pc(V,!0),2&e&&r.uc(n=r.dc())&&(t._body=n.first)},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,t){2&e&&r.Gb("mat-expanded",t.expanded)("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-expansion-panel-spacing",t._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[r.Bb([{provide:$,useValue:void 0}]),r.zb,r.Ab],ngContentSelectors:M,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,t){1&e&&(r.mc(U),r.lc(0),r.Vb(1,"div",0,1),r.cc("@bodyExpansion.done",(function(e){return t._bodyAnimationDone.next(e)})),r.Vb(3,"div",2),r.lc(4,1),r.Hc(5,A,0,0,"ng-template",3),r.Ub(),r.lc(6,2),r.Ub()),2&e&&(r.Cb(1),r.nc("@bodyExpansion",t._getExpandedState())("id",t.id),r.Db("aria-labelledby",t._headerId),r.Cb(4),r.nc("cdkPortalOutlet",t._portal))},directives:[f.c],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[H.bodyExpansion]},changeDetection:0}),Q),K=((j=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||j)},j.\u0275dir=r.Kb({type:j,selectors:[["mat-action-row"]],hostAttrs:[1,"mat-action-row"]}),j),q=((E=function(){function e(t,n,i,a,o,r){var c=this;_classCallCheck(this,e),this.panel=t,this._element=n,this._focusMonitor=i,this._changeDetectorRef=a,this._animationMode=r,this._parentChangeSubscription=l.a.EMPTY;var s=t.accordion?t.accordion._stateChanges.pipe(Object(C.a)((function(e){return!(!e.hideToggle&&!e.togglePosition)}))):P.a;this._parentChangeSubscription=Object(w.a)(t.opened,t.closed,s,t._inputChanges.pipe(Object(C.a)((function(e){return!!(e.hideToggle||e.disabled||e.togglePosition)})))).subscribe((function(){return c._changeDetectorRef.markForCheck()})),t.closed.pipe(Object(C.a)((function(){return t._containsFocus()}))).subscribe((function(){return i.focusVia(n,"program")})),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}return _createClass(e,[{key:"_toggle",value:function(){this.disabled||this.panel.toggle()}},{key:"_isExpanded",value:function(){return this.panel.expanded}},{key:"_getExpandedState",value:function(){return this.panel._getExpandedState()}},{key:"_getPanelId",value:function(){return this.panel.id}},{key:"_getTogglePosition",value:function(){return this.panel.togglePosition}},{key:"_showToggle",value:function(){return!this.panel.hideToggle&&!this.panel.disabled}},{key:"_getHeaderHeight",value:function(){var e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}},{key:"_keydown",value:function(e){switch(e.keyCode){case y.n:case y.f:Object(y.s)(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._element,e,t)}},{key:"ngAfterViewInit",value:function(){var e=this;this._focusMonitor.monitor(this._element).subscribe((function(t){t&&e.panel.accordion&&e.panel.accordion._handleHeaderFocus(e)}))}},{key:"ngOnDestroy",value:function(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}},{key:"disabled",get:function(){return this.panel.disabled}}]),e}()).\u0275fac=function(e){return new(e||E)(r.Pb(N,1),r.Pb(r.l),r.Pb(v.h),r.Pb(r.h),r.Pb(B,8),r.Pb(O.a,8))},E.\u0275cmp=r.Jb({type:E,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,t){1&e&&r.cc("click",(function(){return t._toggle()}))("keydown",(function(e){return t._keydown(e)})),2&e&&(r.Db("id",t.panel._headerId)("tabindex",t.disabled?-1:0)("aria-controls",t._getPanelId())("aria-expanded",t._isExpanded())("aria-disabled",t.panel.disabled),r.Gc("height",t._getHeaderHeight()),r.Gb("mat-expanded",t._isExpanded())("mat-expansion-toggle-indicator-after","after"===t._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===t._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},ngContentSelectors:L,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,t){1&e&&(r.mc(R),r.Vb(0,"span",0),r.lc(1),r.lc(2,1),r.lc(3,2),r.Ub(),r.Hc(4,F,1,1,"span",1)),2&e&&(r.Cb(4),r.nc("ngIf",t._showToggle()))},directives:[g.t],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}\n'],encapsulation:2,data:{animation:[H.indicatorRotate]},changeDetection:0}),E),W=((D=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||D)},D.\u0275dir=r.Kb({type:D,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),D),X=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments))._ownHeaders=new r.F,e._hideToggle=!1,e.displayMode="default",e.togglePosition="after",e}return _createClass(n,[{key:"ngAfterContentInit",value:function(){var e=this;this._headers.changes.pipe(Object(k.a)(this._headers)).subscribe((function(t){e._ownHeaders.reset(t.filter((function(t){return t.panel.accordion===e}))),e._ownHeaders.notifyOnChanges()})),this._keyManager=new v.g(this._ownHeaders).withWrap()}},{key:"_handleHeaderKeydown",value:function(e){var t=e.keyCode,n=this._keyManager;t===y.h?Object(y.s)(e)||(n.setFirstItemActive(),e.preventDefault()):t===y.e?Object(y.s)(e)||(n.setLastItemActive(),e.preventDefault()):this._keyManager.onKeydown(e)}},{key:"_handleHeaderFocus",value:function(e){this._keyManager.updateActiveItem(e)}},{key:"hideToggle",get:function(){return this._hideToggle},set:function(e){this._hideToggle=Object(c.c)(e)}}]),n}(p);e.\u0275fac=function(n){return t(n||e)},e.\u0275dir=r.Kb({type:e,selectors:[["mat-accordion"]],contentQueries:function(e,t,n){var i;1&e&&r.Ib(n,q,!0),2&e&&r.uc(i=r.dc())&&(t._headers=i)},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("mat-accordion-multi",t.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[r.Bb([{provide:$,useExisting:e}]),r.zb]});var t=r.Xb(e);return e}(),G=((S=function e(){_classCallCheck(this,e)}).\u0275mod=r.Nb({type:S}),S.\u0275inj=r.Mb({factory:function(e){return new(e||S)},imports:[[g.c,m,f.h]]}),S)},"8cGs":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("sJvS"),a=n("tU2R"),o=n("PCqb"),r=n("JWVf"),c=n("fXoL"),s=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).DEFAULT_MAX_SIZE_MB=5,e}return _createClass(n,[{key:"initValidations",value:function(){var e,t=[new a.a({maxSize:Object(o.a)(this.DEFAULT_MAX_SIZE_MB,"MB")},this.i18n),new r.a({types:["image"]},this.i18n)];(e=this.validations).push.apply(e,t)}}]),n}(i.a);return e.\u0275fac=function(t){return l(t||e)},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),l=c.Xb(s)},BeMW:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("+fqm"),a=n("fXoL"),o=n("tyNb"),r=n("kmQS"),c=n("twBr"),s=function(){var e=function(){function e(t,n,i,a){_classCallCheck(this,e),this.route=t,this.router=n,this.settings=i,this.currentUser=a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.data.subscribe((function(t){t.api&&(e.track=t.api.track)}))}},{key:"toTracksPage",value:function(){this.insideAdmin()?this.router.navigate(["/admin/tracks"]):this.router.navigate(["/user",this.currentUser.get("id"),this.currentUser.get("display_name"),"tracks"])}},{key:"canDeactivate",value:function(){return!this.trackForm.form.dirty}},{key:"insideAdmin",value:function(){return this.router.url.includes("admin")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Pb(o.a),a.Pb(o.e),a.Pb(r.a),a.Pb(c.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["crupdate-track-page"]],viewQuery:function(e,t){var n;1&e&&a.Fc(i.a,!0),2&e&&a.uc(n=a.dc())&&(t.trackForm=n.first)},decls:1,vars:2,consts:[[1,"material-panel",3,"track","autoMatch","canceled","saved"]],template:function(e,t){1&e&&(a.Vb(0,"track-form",0),a.cc("canceled",(function(){return t.toTracksPage()}))("saved",(function(){return t.toTracksPage()})),a.Ub()),2&e&&a.nc("track",t.track)("autoMatch","artist"===t.settings.get("player.artist_type"))},directives:[i.a],styles:[""],changeDetection:0}),e}()},DzUk:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL"),a=n("Lm4C"),o=function(){var e=function(){function e(t){_classCallCheck(this,e),this.el=t,this.config={},this.filesSelected=new i.o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.el.nativeElement.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),Object(a.a)(e.config).then((function(t){t&&t.length&&e.filesSelected.emit(t)}))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.l))},e.\u0275dir=i.Kb({type:e,selectors:[["","uploadButton",""]],inputs:{config:["uploadButton","config"]},outputs:{filesSelected:"filesSelected"}}),e}()},GZAL:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("3Pt+"),a=n("2Vo4"),o=n("XNiG"),r=n("LRne"),c=n("Kj3r"),s=n("/uUt"),l=n("eIep"),u=n("JIr8"),d=n("fXoL"),p=n("A5z7"),b=n("ofXK"),h=n("/1cH"),m=n("NFeN"),f=n("FKr1"),g=n("zW5C"),v=["auto"],y=["inputEl"];function _(e,t){if(1&e){var n=d.Wb();d.Vb(0,"mat-chip",8),d.cc("removed",(function(){d.yc(n);var e=t.index;return d.gc().remove(e)})),d.Jc(1),d.Qb(2,"mat-icon",9),d.Ub()}if(2&e){var i=t.$implicit;d.nc("selectable",!1)("removable",!0),d.Cb(1),d.Lc(" ",i," ")}}function k(e,t){if(1&e&&(d.Vb(0,"mat-option",10),d.Jc(1),d.Ub()),2&e){var n=t.$implicit;d.nc("value",n),d.Cb(1),d.Kc(n)}}var C=function(e){return{elementRef:e}},x=function(){var e=function(){function e(t){_classCallCheck(this,e),this.el=t,this.type="text",this.formControl=new i.i,this.items$=new a.a([]),this.suggestedValues$=new o.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.suggestFn&&this.bindToSearchControl()}},{key:"remove",value:function(e){var t=_toConsumableArray(this.items$.value);t.splice(e,1),this.items$.next(t),this.propagateChange(this.items$.value)}},{key:"addFromChipInput",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.matAutocomplete.isOpen||this.add(e,t)}},{key:"addFromAutocomplete",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.add(e,t)}},{key:"add",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=e?e.trim():"";var n=this.items$.value.indexOf(e)>-1;e&&!n&&(this.items$.next([].concat(_toConsumableArray(this.items$.value),[e])),t&&this.propagateChange(this.items$.value)),this.inputEl&&(this.inputEl.value=""),this.formControl.setValue(null),this.suggestedValues$.next([])}},{key:"writeValue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t&&t.length)t.forEach((function(t){return e.add(t,!1)}));else if(this.items$.value.length)for(;0!==this.items$.value.length;)this.remove(0)}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(){}},{key:"bindToSearchControl",value:function(){var e=this;this.formControl.valueChanges.pipe(Object(c.a)(150),Object(s.a)(),Object(l.a)((function(t){return t?e.suggestFn(t):Object(r.a)([])})),Object(u.a)((function(){return Object(r.a)([])}))).subscribe((function(t){e.suggestedValues$.next(t)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.l))},e.\u0275cmp=d.Jb({type:e,selectors:[["chip-input"]],viewQuery:function(e,t){var n;1&e&&(d.Pc(v,!0),d.Fc(y,!0)),2&e&&(d.uc(n=d.dc())&&(t.matAutocomplete=n.first),d.uc(n=d.dc())&&(t.inputEl=n.first))},inputs:{placeholder:"placeholder",type:"type",suggestFn:"suggestFn"},features:[d.Bb([{provide:i.s,useExisting:e,multi:!0}])],decls:11,vars:18,consts:[[3,"selectable"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],[1,"mat-chip-input","mat-input-element",3,"placeholder","type","matChipInputFor","matChipInputAddOnBlur","matAutocomplete","matAutocompleteConnectedTo","formControl","matChipInputTokenEnd"],["inputEl",""],[1,"chip-input-autocomplete-panel",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"selectable","removable","removed"],["matChipRemove","","svgIcon","cancel"],[3,"value"]],template:function(e,t){if(1&e&&(d.Vb(0,"mat-chip-list",0,1),d.Hc(2,_,3,3,"mat-chip",2),d.hc(3,"async"),d.Vb(4,"input",3,4),d.cc("matChipInputTokenEnd",(function(e){return t.addFromChipInput(e.value)})),d.hc(6,"trans"),d.Ub(),d.Ub(),d.Vb(7,"mat-autocomplete",5,6),d.cc("optionSelected",(function(e){return t.addFromAutocomplete(e.option.viewValue)})),d.Hc(9,k,2,2,"mat-option",7),d.hc(10,"async"),d.Ub()),2&e){var n=d.vc(1),i=d.vc(8);d.nc("selectable",!1),d.Cb(2),d.nc("ngForOf",d.ic(3,10,t.items$)),d.Cb(2),d.nc("placeholder",d.ic(6,12,t.placeholder))("type",t.type)("matChipInputFor",n)("matChipInputAddOnBlur",!0)("matAutocomplete",i)("matAutocompleteConnectedTo",d.rc(16,C,t.el))("formControl",t.formControl),d.Cb(5),d.nc("ngForOf",d.ic(10,14,t.suggestedValues$))}},directives:[p.c,b.s,p.b,h.c,i.d,i.u,i.j,h.a,p.a,m.a,p.d,f.l],pipes:[b.b,g.a],styles:["chip-input{display:block;min-height:46px}chip-input .mat-chip-list-wrapper{width:100%;height:100%;color:inherit;border:1px solid var(--be-divider-default);padding:6px;line-height:normal;font-size:1.4rem;font-family:inherit;background-color:inherit;box-sizing:border-box;border-radius:2px;margin:0}chip-input .mat-chip-input{height:24px;font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:0;max-width:100%;vertical-align:bottom;text-align:inherit}chip-input .mat-chip-input:focus{outline:none}"],encapsulation:2,changeDetection:0}),e}()},PUkl:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("/RwR"),a=n("fXoL"),o=n("QGXG"),r=function(){var e=function(){function e(t){_classCallCheck(this,e),this.modal=t}return _createClass(e,[{key:"canDeactivate",value:function(e){return!!e.canDeactivate()||this.modal.show(i.a,{title:"Unsaved Changes",body:"You have unsaved changes. Do you want to discard them?",ok:"Discard"}).beforeClosed()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Zb(o.a))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},TheJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("h586"),a=n("r48M"),o=n("fXoL"),r=n("tyNb"),c=n("twBr"),s=n("kmQS"),l=function(){var e=function(){function e(t,n,i,a){_classCallCheck(this,e),this.route=t,this.router=n,this.currentUser=i,this.settings=a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.data.subscribe((function(t){t.api&&(e.album=t.api.album)}))}},{key:"toAlbumsPage",value:function(){this.router.url.includes("admin")?this.router.navigate(["/admin/albums"]):this.router.navigate(["/user",this.currentUser.get("id"),this.currentUser.get("display_name"),"albums"])}},{key:"canDeactivate",value:function(){return!this.albumForm.form.dirty}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Pb(r.a),o.Pb(r.e),o.Pb(c.a),o.Pb(s.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["crupdate-album-page"]],viewQuery:function(e,t){var n;1&e&&o.Fc(a.a,!0),2&e&&o.uc(n=o.dc())&&(t.albumForm=n.first)},features:[o.Bb([i.a])],decls:1,vars:3,consts:[[1,"material-panel",3,"album","autoMatch","confirmCancel","canceled","saved"]],template:function(e,t){1&e&&(o.Vb(0,"album-form",0),o.cc("canceled",(function(){return t.toAlbumsPage()}))("saved",(function(){return t.toAlbumsPage()})),o.Ub()),2&e&&o.nc("album",t.album)("autoMatch","artist"===t.settings.get("player.artist_type"))("confirmCancel",!1)},directives:[a.a],styles:[""],changeDetection:0}),e}()},W5HX:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Image="uploads/images",e}({})},WOz2:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("ofXK"),a=n("A5z7"),o=n("NFeN"),r=n("3Pt+"),c=n("6rvT"),s=n("/1cH"),l=n("fXoL"),u=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.e,o.b,s.b,r.E,c.a]]}),e}()},gcYM:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("7o/Q"),a=n("D0XW");n("l7GE"),n("ZUHj");var o={leading:!0,trailing:!1};function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return function(i){return i.lift(new c(e,t,n.leading,n.trailing))}}var c=function(){function e(t,n,i,a){_classCallCheck(this,e),this.duration=t,this.scheduler=n,this.leading=i,this.trailing=a}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new s(e,this.duration,this.scheduler,this.leading,this.trailing))}}]),e}(),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,a,o,r){var c;return _classCallCheck(this,n),(c=t.call(this,e)).duration=i,c.scheduler=a,c.leading=o,c.trailing=r,c._hasTrailingValue=!1,c._trailingValue=null,c}return _createClass(n,[{key:"_next",value:function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}]),n}(i.a);function l(e){e.subscriber.clearThrottle()}},pCVY:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("fXoL"),a=n("3Pt+"),o=n("2Vo4"),r=n("h586"),c=n("QeDF"),s=n("W5HX"),l=n("8cGs"),u=n("oVOl"),d=n("LRXf"),p=n("ofXK"),b=n("bTqV"),h=n("Rd8u"),m=n("DzUk"),f=n("rG4v"),g=n("gA0O"),v=n("NFeN");function y(e,t){1&e&&i.Qb(0,"image-or-icon",5),2&e&&i.nc("src",t.ngIf)}function _(e,t){if(1&e&&i.Qb(0,"image-or-icon",5),2&e){var n=i.gc(2);i.nc("src",n.defaultBackground)}}function k(e,t){if(1&e&&i.Hc(0,_,1,1,"image-or-icon",6),2&e){var n=i.gc();i.nc("ngIf",n.defaultBackground)}}function C(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",7),i.cc("click",(function(){return i.yc(n),i.gc().deleteUpload()})),i.Qb(1,"mat-icon",8),i.Ub()}}var x=function(){var e=function(){function e(t,n,a,r){_classCallCheck(this,e),this.uploadQueue=t,this.imageValidator=n,this.uploadsApi=a,this.http=r,this.fileDeleted=new i.o,this.buttonText="Upload image",this.uploadInputConfig={multiple:!1,types:[c.a.image]},this.src$=new o.a(null)}return _createClass(e,[{key:"writeValue",value:function(e){this.src$.next(e)}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(){}},{key:"uploadImage",value:function(e){var t=this;this.uploadQueue.start(e,this.uploadConfig||this.defaultUploadConfig()).subscribe((function(e){t.src$.next(e.fileEntry.url),t.propagateChange(e.fileEntry.url)}))}},{key:"deleteUpload",value:function(){var e=this,t={paths:[this.src$.value],deleteForever:!0};(this.uploadConfig&&this.uploadConfig.uri?this.http.delete(this.uploadConfig.uri,t):this.uploadsApi.delete(t)).subscribe((function(){e.src$.next(null),e.propagateChange(null),e.fileDeleted.emit()}))}},{key:"defaultUploadConfig",value:function(){return{httpParams:{diskPrefix:this.diskPrefix||"common_media"},uri:s.a.Image,validator:this.imageValidator}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Pb(r.a),i.Pb(l.a),i.Pb(u.a),i.Pb(d.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["upload-image-control"]],inputs:{defaultBackground:"defaultBackground",buttonText:"buttonText",uploadConfig:"uploadConfig",diskPrefix:"diskPrefix"},outputs:{fileDeleted:"fileDeleted"},features:[i.Bb([r.a,{provide:a.s,useExisting:e,multi:!0}])],decls:10,vars:9,consts:[["class","inherit-size",3,"src",4,"ngIf","ngIfElse"],["defaultBg",""],[1,"action-buttons"],["type","button","mat-stroked-button","","color","accent","trans","",1,"action-button",3,"uploadButton","filesSelected"],["type","button","class","action-button delete-button","mat-icon-button","",3,"click",4,"ngIf"],[1,"inherit-size",3,"src"],["class","inherit-size",3,"src",4,"ngIf"],["type","button","mat-icon-button","",1,"action-button","delete-button",3,"click"],["svgIcon","delete"]],template:function(e,t){if(1&e&&(i.Hc(0,y,1,1,"image-or-icon",0),i.hc(1,"async"),i.Hc(2,k,1,1,"ng-template",null,1,i.Ic),i.Vb(4,"div",2),i.Vb(5,"button",3),i.cc("filesSelected",(function(e){return t.uploadImage(e)})),i.Jc(6),i.Ub(),i.Hc(7,C,2,0,"button",4),i.hc(8,"async"),i.Ub(),i.Qb(9,"upload-progress-bar")),2&e){var n=i.vc(3);i.nc("ngIf",i.ic(1,5,t.src$))("ngIfElse",n),i.Cb(5),i.nc("uploadButton",t.uploadInputConfig),i.Cb(1),i.Kc(t.buttonText),i.Cb(1),i.nc("ngIf",i.ic(8,7,t.src$))}},directives:[p.t,b.b,h.a,m.a,f.a,g.a,v.a],pipes:[p.b],styles:["[_nghost-%COMP%]{display:block;width:220px;height:220px;flex-shrink:0;border-radius:4px;overflow:hidden;background:linear-gradient(135deg,#70929c,#846170);position:relative}.inherit-size[_nghost-%COMP%], .inherit-size   [_nghost-%COMP%]{width:100%;height:100%}.action-buttons[_ngcontent-%COMP%]{position:absolute;bottom:25px;left:0;right:0;margin:auto;text-align:center}.action-button[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);border-color:rgba(0,0,0,.1);background:hsla(0,0%,100%,.8)}.delete-button[_ngcontent-%COMP%]{margin-left:5px;border-radius:4px;line-height:34px;height:34px;width:34px}upload-progress-bar[_ngcontent-%COMP%]{width:100%;position:absolute;left:0;bottom:0}"]}),e}()},r48M:function(e,t,n){"use strict";n.d(t,"a",(function(){return ae}));var i=n("fXoL"),a=n("5+WD"),o=n("+fqm"),r=n("2Vo4"),c=n("lJxs"),s=n("nYR2"),l=n("He21"),u=n("/RwR"),d=n("QeDF"),p=n("/Sbb"),b=n("XSk8"),h=n("3Pt+"),m=n("h586"),f=n("/M5e"),g=n("twBr"),v=n("QGXG"),y=n("i2dy"),_=n("2zME"),k=n("kmQS"),C=n("OkhP"),x=n("pCVY"),O=n("bTqV"),P=n("Rd8u"),w=n("DzUk"),I=n("ofXK"),V=n("GZAL"),A=n("LRne"),U=n("Kj3r"),M=n("/uUt"),F=n("eIep"),T=n("JIr8"),S=n("+Bz4"),D=n("STbY"),E=n("FBzJ"),j=n("8HKz"),Q=n("NFeN"),R=["searchInput"];function L(e,t){if(1&e&&(i.Vb(0,"span"),i.Qb(1,"media-image",19),i.Jc(2),i.Ub()),2&e){var n=t.ngIf;i.Cb(1),i.nc("media",n),i.Cb(1),i.Lc(" ",n.name," ")}}function $(e,t){1&e&&(i.Vb(0,"span",20),i.Jc(1,"None"),i.Ub())}function H(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",21),i.cc("click",(function(){return i.yc(n),i.gc().clearSearchInput()})),i.Qb(1,"mat-icon",22),i.Ub()}}function J(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",13),i.cc("click",(function(){i.yc(n);var e=t.$implicit;return i.gc().selectArtist(e)})),i.Qb(1,"media-image",19),i.Vb(2,"div",23),i.Vb(3,"div",24),i.Jc(4),i.Ub(),i.Vb(5,"div",25),i.Jc(6,"Artist"),i.Ub(),i.Ub(),i.Ub()}if(2&e){var a=t.$implicit;i.Cb(1),i.nc("media",a),i.Cb(3),i.Kc(a.name)}}function z(e,t){1&e&&(i.Vb(0,"button",26),i.Jc(1,"No artists found."),i.Ub())}var B,N=((B=function(){function e(t){_classCallCheck(this,e),this.search=t,this.searchFormControl=new h.i,this.loading$=new r.a(!1),this.artists$=new r.a([]),this.selectedArtist$=new r.a(null),this.searchedOnce=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.bindToSearchControl()}},{key:"writeValue",value:function(e){this.selectedArtist$.next(e)}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(){}},{key:"bindToSearchControl",value:function(){var e=this;this.searchFormControl.valueChanges.pipe(Object(U.a)(150),Object(M.a)(),Object(F.a)((function(t){return e.searchArtists(t)})),Object(T.a)((function(){return Object(A.a)([])}))).subscribe((function(t){e.searchedOnce=!0,e.artists$.next(t)}))}},{key:"searchArtists",value:function(e){var t=this;return this.loading$.next(!0),this.search.media(e,{limit:7,forceLocal:!0,modelTypes:[S.a]}).pipe(Object(s.a)((function(){return t.loading$.next(!1)})),Object(c.a)((function(e){return e.results.artists})))}},{key:"onMenuOpened",value:function(){this.searchedOnce||this.clearSearchInput()}},{key:"selectArtist",value:function(e){this.selectedArtist$.next(e),this.propagateChange(e)}},{key:"clearSearchInput",value:function(){this.searchFormControl.setValue("")}},{key:"onMenuClosed",value:function(){this.loading$.next(!1),this.clearSearchInput()}}]),e}()).\u0275fac=function(e){return new(e||B)(i.Pb(C.a))},B.\u0275cmp=i.Jb({type:B,selectors:[["album-artist-control"]],viewQuery:function(e,t){var n;1&e&&i.Fc(R,!0),2&e&&i.uc(n=i.dc())&&(t.searchInput=n.first)},hostAttrs:["tabindex","0"],features:[i.Bb([{provide:h.s,useExisting:B,multi:!0}])],decls:25,vars:16,consts:[[1,"fake-input",3,"matMenuTriggerFor","menuOpened","menuClosed"],[4,"ngIf","ngIfElse"],["anyArtist",""],[1,"arrow-container"],[1,"arrow"],[1,"album-artist-control-menu"],["menu","matMenu"],[1,"input-container","search-input-container",3,"click"],[1,"search-input-wrapper"],["type","text","placeholder","Search...","mat-menu-item","","trans-placeholder","",3,"formControl","blur"],["searchInput",""],["class","clear-search-input-button","mat-icon-button","",3,"click",4,"ngIf"],[1,"small",3,"isVisible"],["mat-menu-item","",3,"click"],["default","artist",1,"result-image"],[1,"info","any-user-info"],["trans","",1,"name"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","","disabled","","trans","",4,"ngIf"],[1,"result-image",3,"media"],["trans",""],["mat-icon-button","",1,"clear-search-input-button",3,"click"],["svgIcon","close"],[1,"user-info"],[1,"name"],["trans","",1,"email"],["mat-menu-item","","disabled","","trans",""]],template:function(e,t){if(1&e){var n=i.Wb();i.Vb(0,"div",0),i.cc("menuOpened",(function(){return t.onMenuOpened()}))("menuClosed",(function(){return t.onMenuClosed()})),i.Hc(1,L,3,2,"span",1),i.hc(2,"async"),i.Hc(3,$,2,0,"ng-template",null,2,i.Ic),i.Vb(5,"div",3),i.Qb(6,"div",4),i.Ub(),i.Ub(),i.Vb(7,"mat-menu",5,6),i.Vb(9,"div",7),i.cc("click",(function(e){return e.stopPropagation()})),i.Vb(10,"div",8),i.Vb(11,"input",9,10),i.cc("blur",(function(){return i.yc(n),i.vc(12).focus()})),i.Ub(),i.Hc(13,H,2,0,"button",11),i.Qb(14,"loading-indicator",12),i.hc(15,"async"),i.Ub(),i.Ub(),i.Vb(16,"button",13),i.cc("click",(function(){return t.selectArtist(null)})),i.Qb(17,"media-image",14),i.Vb(18,"div",15),i.Vb(19,"div",16),i.Jc(20,"No Artist"),i.Ub(),i.Ub(),i.Ub(),i.Hc(21,J,7,2,"button",17),i.hc(22,"async"),i.Hc(23,z,2,0,"button",18),i.hc(24,"async"),i.Ub()}if(2&e){var a=i.vc(4),o=i.vc(8);i.nc("matMenuTriggerFor",o),i.Cb(1),i.nc("ngIf",i.ic(2,8,t.selectedArtist$))("ngIfElse",a),i.Cb(10),i.nc("formControl",t.searchFormControl),i.Cb(2),i.nc("ngIf",t.searchFormControl.value),i.Cb(1),i.nc("isVisible",i.ic(15,10,t.loading$)),i.Cb(7),i.nc("ngForOf",i.ic(22,12,t.artists$)),i.Cb(2),i.nc("ngIf",t.searchedOnce&&!i.ic(24,14,t.artists$).length)}},directives:[D.d,I.t,D.e,h.d,D.b,P.a,h.u,h.j,E.a,j.a,I.s,O.b,Q.a],pipes:[I.b],styles:["[_nghost-%COMP%]{display:block;min-width:280px;max-width:100%}.fake-input[_ngcontent-%COMP%]{position:relative}.result-image[_ngcontent-%COMP%]{display:inline-block;margin-right:5px;width:25px;height:25px;border-radius:4px;vertical-align:middle}.arrow-container[_ngcontent-%COMP%]{height:100%;position:absolute;top:1px;right:1px;width:20px}.arrow[_ngcontent-%COMP%]{position:absolute;border-color:#000 transparent transparent;border-style:solid;border-width:5px 4px 0;height:0;width:0;left:50%;top:50%;margin-left:-4px;margin-top:-2px}  .album-artist-control-menu{width:280px}.mat-menu-item[_ngcontent-%COMP%]:first-of-type{border-top:1px solid var(--be-divider-default)}.search-input-container[_ngcontent-%COMP%]{padding:2px 10px 10px}.search-input-wrapper[_ngcontent-%COMP%]{position:relative}.clear-search-input-button[_ngcontent-%COMP%]{position:absolute;top:4px;right:0;color:var(--be-secondary-text)}.mat-menu-item[_ngcontent-%COMP%]{display:flex;vertical-align:middle}.mat-menu-item.selected[_ngcontent-%COMP%]{background-color:var(--be-accent-emphasis)}.mat-menu-item[_ngcontent-%COMP%]   .result-image[_ngcontent-%COMP%]{width:35px;height:35px}.mat-menu-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:capitalize}.mat-menu-item[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text);font-size:1.3rem}.user-info[_ngcontent-%COMP%]{line-height:normal}.any-user-info[_ngcontent-%COMP%]{line-height:35px}loading-indicator[_ngcontent-%COMP%]{position:absolute;top:12px;right:40px}"],changeDetection:0}),B);function K(e,t){if(1&e&&(i.Vb(0,"div",23),i.Jc(1),i.Ub()),2&e){var n=i.gc();i.Cb(1),i.Kc(n.errors.name)}}function q(e,t){if(1&e&&(i.Vb(0,"div",23),i.Jc(1),i.Ub()),2&e){var n=i.gc();i.Cb(1),i.Kc(n.errors.release_date)}}function W(e,t){if(1&e&&(i.Vb(0,"div",23),i.Jc(1),i.Ub()),2&e){var n=i.gc(2);i.Cb(1),i.Kc(n.errors.artist_id)}}function X(e,t){if(1&e&&(i.Vb(0,"div",6),i.Vb(1,"label",24),i.Jc(2,"Artist"),i.Ub(),i.Qb(3,"album-artist-control",25),i.Hc(4,W,2,1,"div",9),i.Ub()),2&e){var n=i.gc();i.Cb(4),i.nc("ngIf",n.errors.artist_id)}}function G(e,t){if(1&e&&(i.Vb(0,"div",23),i.Jc(1),i.Ub()),2&e){var n=i.gc();i.Cb(1),i.Kc(n.errors.description)}}function Y(e,t){if(1&e&&(i.Vb(0,"div",23),i.Jc(1),i.Ub()),2&e){var n=i.gc();i.Cb(1),i.Kc(n.errors.genres)}}function Z(e,t){if(1&e&&(i.Vb(0,"div",23),i.Jc(1),i.Ub()),2&e){var n=i.gc();i.Cb(1),i.Kc(n.errors.tags)}}function ee(e,t){if(1&e){var n=i.Wb();i.Vb(0,"track-form",29),i.cc("canceled",(function(){i.yc(n);var e=i.gc().$implicit;return i.gc().trackRemoved(e)})),i.Vb(1,"button",30),i.Qb(2,"mat-icon",31),i.Ub(),i.Ub()}if(2&e){var a=i.gc(),o=a.$implicit,r=a.index,c=i.gc();i.nc("albumForm",c.form)("track",o)("number",r+1)}}function te(e,t){if(1&e){var n=i.Wb();i.Vb(0,"track-form",32),i.cc("canceled",(function(){i.yc(n);var e=i.gc().$implicit;return i.gc().trackRemoved(e)})),i.Vb(1,"button",30),i.Qb(2,"mat-icon",31),i.Ub(),i.Ub()}if(2&e){var a=i.gc(),o=a.$implicit,r=a.index,c=i.gc();i.nc("albumForm",c.form)("uploadQueueItem",o)("number",r+1)}}function ne(e,t){if(1&e&&(i.Vb(0,"li",26),i.Hc(1,ee,3,3,"track-form",27),i.Hc(2,te,3,3,"track-form",28),i.Ub()),2&e){var n=t.$implicit;i.Cb(1),i.nc("ngIf",n.model_type),i.Cb(1),i.nc("ngIf",!n.model_type)}}var ie,ae=((ie=function(){function e(t,n,a,o,s,l,u,p,h,m){var f=this;_classCallCheck(this,e),this.fb=t,this.uploadQueue=n,this.albums=a,this.cd=o,this.currentUser=s,this.modal=l,this.toast=u,this.audioValidator=p,this.settings=h,this.search=m,this.uploadButtonConfig={multiple:!0,types:[d.a.audio,d.a.video]},this.hideArtistControl=!1,this.confirmCancel=!0,this.canceled=new i.o,this.autoMatch=!1,this.saved=new i.o,this.errors={},this.loading$=new r.a(!1),this.allTracks$=new r.a([]),this.form=this.fb.group({name:[""],image:[""],artist:[null],release_date:[(new Date).toISOString().slice(0,10)],description:[""],tags:[[]],genres:[[]]}),this.trackByFn=function(e,t){return t.id},this.suggestTagFn=function(e){return f.search.media(e,{modelTypes:["App\\Tag"],limit:5}).pipe(Object(c.a)((function(e){return e.results.tags.map((function(e){return e.name}))})))},this.suggestGenreFn=function(e){return f.search.media(e,{modelTypes:[b.a],limit:5}).pipe(Object(c.a)((function(e){return e.results.genres.map((function(e){return e.name}))})))}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.allTracks$=new r.a([].concat(_toConsumableArray(this.album?this.album.tracks:[]),_toConsumableArray(this.onlyValidUploads(this.uploadQueue.uploads$.value)))),this.uploadQueue.uploadsAdded$.subscribe((function(t){e.allTracks$.next([].concat(_toConsumableArray(e.allTracks$.value),_toConsumableArray(e.onlyValidUploads(t))))})),this.album){var t=Object.assign(Object.assign({},this.album),{tags:this.album.tags.map((function(e){return e.name})),genres:this.album.genres.map((function(e){return e.display_name||e.name}))});this.form.patchValue(t)}}},{key:"onlyValidUploads",value:function(e){return e.filter((function(e){return!e.error$.value}))}},{key:"reorderTracks",value:function(e){var t=this.allTracks$.value;Object(a.f)(t,e.previousIndex,e.currentIndex),this.allTracks$.next(t)}},{key:"submit",value:function(){var e=this;if(this.loading$.next(!0),this.trackForms.some((function(e){return e.isUploading()})))this.toast.open("Some tracks are still uploading.");else{var t=Object.assign(Object.assign({},this.form.value),{tracks:this.trackForms.map((function(e){return e.getPayload()}))});t.artist?(t.artist_id=t.artist.id,t.artist_type=t.artist.artist_type):this.artist?(t.artist_id=this.artist.id,t.artist_type=this.artist.model_type):"user"===this.settings.get("player.artist_type")&&(t.artist_id=this.currentUser.get("id"),t.artist_type=l.a),delete t.artist,(this.album?this.albums.update(this.album.id,t):this.albums.create(t)).pipe(Object(s.a)((function(){return e.loading$.next(!1)}))).subscribe((function(t){e.form.markAsPristine(),e.toast.open("Album saved."),e.uploadQueue.reset(),e.saved.emit(t.album)}),(function(t){e.errors=t.errors,Object(p.a)(e.errors,"track-form"),e.cd.markForCheck()}))}}},{key:"maybeCancel",value:function(){var e=this;this.confirmCancel?this.modal.show(u.a,{title:"Delete Album",body:"Are you sure you want to cancel all uploads and delete this album?",ok:"Delete"}).beforeClosed().subscribe((function(t){t&&(e.form.reset(),e.uploadQueue.reset(),e.canceled.emit())})):this.canceled.emit()}},{key:"uploadFiles",value:function(e){var t=this;this.uploadQueue.start(e,{uri:"uploads",httpParams:{autoMatch:this.autoMatch,diskPrefix:"track_media",disk:"public"},validator:this.audioValidator}).subscribe((function(){}),(function(){return t.toast.open("Could not upload tracks.")}))}},{key:"trackRemoved",value:function(e){var t=this.allTracks$.value.filter((function(t){return t.id!==e.id}));this.allTracks$.next(t)}}]),e}()).\u0275fac=function(e){return new(e||ie)(i.Pb(h.h),i.Pb(m.a),i.Pb(f.a),i.Pb(i.h),i.Pb(g.a),i.Pb(v.a),i.Pb(y.a),i.Pb(_.a),i.Pb(k.a),i.Pb(C.a))},ie.\u0275cmp=i.Jb({type:ie,selectors:[["album-form"]],viewQuery:function(e,t){var n;1&e&&i.Pc(o.a,!0),2&e&&i.uc(n=i.dc())&&(t.trackForms=n)},inputs:{album:"album",artist:"artist",hideArtistControl:"hideArtistControl",confirmCancel:"confirmCancel",autoMatch:"autoMatch"},outputs:{canceled:"canceled",saved:"saved"},decls:41,vars:17,consts:[[3,"formGroup","ngSubmit"],[1,"main-info-fields"],[1,"left-column"],["formControlName","image","uploadType","album"],["mat-flat-button","","color","accent","type","button","trans","",1,"upload-tracks-button",3,"uploadButton","filesSelected"],[1,"text-fields-container","many-inputs"],[1,"input-container"],["for","album-form-name","trans",""],["type","text","id","album-form-name","formControlName","name","required",""],["class","error",4,"ngIf"],["for","album-form-release_date","trans",""],["type","date","placeholder","YYYY-MM-DD","id","album-form-release_date","formControlName","release_date","required",""],["class","input-container",4,"ngIf"],["for","album-form-description","trans",""],["type","text","id","album-form-description","formControlName","description","minlength","10","maxlength","250","rows","5"],["for","album-form-genres","trans",""],["placeholder","+Add genre","id","album-form-genres","formControlName","genres",3,"suggestFn"],["for","album-form-tags","trans",""],["placeholder","+Add tag","id","album-form-tags","formControlName","tags",3,"suggestFn"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["type","button","mat-button","","trans","",3,"click"],["cdkDropList","",1,"track-list",3,"cdkDropListDropped"],["class","track-list-item","cdkDrag","",4,"ngFor","ngForOf","ngForTrackBy"],[1,"error"],["for","album-form-artist","trans",""],["id","album-form-artist","formControlName","artist"],["cdkDrag","",1,"track-list-item"],[3,"albumForm","track","number","canceled",4,"ngIf"],[3,"albumForm","uploadQueueItem","number","canceled",4,"ngIf"],[3,"albumForm","track","number","canceled"],["mat-icon-button","","cdkDragHandle","","type","button"],["svgIcon","drag-handle"],[3,"albumForm","uploadQueueItem","number","canceled"]],template:function(e,t){1&e&&(i.Vb(0,"form",0),i.cc("ngSubmit",(function(){return t.submit()})),i.Vb(1,"div",1),i.Vb(2,"div",2),i.Qb(3,"upload-image-control",3),i.Vb(4,"button",4),i.cc("filesSelected",(function(e){return t.uploadFiles(e)})),i.Jc(5,"Upload Tracks"),i.Ub(),i.Ub(),i.Vb(6,"div",5),i.Vb(7,"div",6),i.Vb(8,"label",7),i.Jc(9,"Name"),i.Ub(),i.Qb(10,"input",8),i.Hc(11,K,2,1,"div",9),i.Ub(),i.Vb(12,"div",6),i.Vb(13,"label",10),i.Jc(14,"Release Date"),i.Ub(),i.Qb(15,"input",11),i.Hc(16,q,2,1,"div",9),i.Ub(),i.Hc(17,X,5,1,"div",12),i.Vb(18,"div",6),i.Vb(19,"label",13),i.Jc(20,"Description"),i.Ub(),i.Qb(21,"textarea",14),i.Hc(22,G,2,1,"div",9),i.Ub(),i.Vb(23,"div",6),i.Vb(24,"label",15),i.Jc(25,"Genres"),i.Ub(),i.Qb(26,"chip-input",16),i.Hc(27,Y,2,1,"div",9),i.Ub(),i.Vb(28,"div",6),i.Vb(29,"label",17),i.Jc(30,"Tags"),i.Ub(),i.Qb(31,"chip-input",18),i.Hc(32,Z,2,1,"div",9),i.Ub(),i.Vb(33,"button",19),i.hc(34,"async"),i.Jc(35,"Save"),i.Ub(),i.Vb(36,"button",20),i.cc("click",(function(){return t.maybeCancel()})),i.Jc(37,"Cancel"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(38,"ul",21),i.cc("cdkDropListDropped",(function(e){return t.reorderTracks(e)})),i.Hc(39,ne,3,2,"li",22),i.hc(40,"async"),i.Ub()),2&e&&(i.nc("formGroup",t.form),i.Cb(4),i.nc("uploadButton",t.uploadButtonConfig),i.Cb(7),i.nc("ngIf",t.errors.name),i.Cb(5),i.nc("ngIf",t.errors.release_date),i.Cb(1),i.nc("ngIf",!t.hideArtistControl||!t.artist&&"artist"===t.settings.get("player.artist_type")),i.Cb(5),i.nc("ngIf",t.errors.description),i.Cb(4),i.nc("suggestFn",t.suggestGenreFn),i.Cb(1),i.nc("ngIf",t.errors.genres),i.Cb(4),i.nc("suggestFn",t.suggestTagFn),i.Cb(1),i.nc("ngIf",t.errors.tags),i.Cb(1),i.nc("disabled",i.ic(34,13,t.loading$)),i.Cb(6),i.nc("ngForOf",i.ic(40,15,t.allTracks$))("ngForTrackBy",t.trackByFn))},directives:[h.K,h.v,h.m,x.a,h.u,h.k,O.b,P.a,w.a,h.d,h.F,I.t,h.q,h.p,V.a,a.c,I.s,N,a.a,o.a,a.b,Q.a],pipes:[I.b],styles:["[_nghost-%COMP%]{display:block;padding:25px}.main-info-fields[_ngcontent-%COMP%]{display:flex}.text-fields-container[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:20px}.track-list[_ngcontent-%COMP%]{margin-top:30px;padding:0 15px}.track-list-item[_ngcontent-%COMP%]:not(.cdk-drag-preview){border-bottom:1px solid var(--be-divider-lighter);padding-bottom:15px;margin-bottom:15px}.upload-tracks-button[_ngcontent-%COMP%]{margin-top:15px;width:100%;line-height:40px}"],changeDetection:0}),ie)},rG4v:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("eNwd"),a=n("gcYM"),o=n("fXoL"),r=n("h586"),c=n("bv9b"),s=function(){var e=function(){function e(t,n,o){var r=this;_classCallCheck(this,e),this.el=t,this.uploadQueue=n,this.cd=o,this.hidden=!0,this.subscription=this.uploadQueue.totalProgress().pipe(Object(a.a)(260,i.a,{leading:!0,trailing:!0})).subscribe((function(e){r.progress=e,r.hidden=100===e||0===r.uploadQueue.count$.value.pending,r.cd.markForCheck()}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Pb(o.l),o.Pb(r.a),o.Pb(o.h))},e.\u0275cmp=o.Jb({type:e,selectors:[["upload-progress-bar"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("hidden",t.hidden)},decls:1,vars:1,consts:[["mode","determinate","color","accent",3,"value"]],template:function(e,t){1&e&&o.Qb(0,"mat-progress-bar",0),2&e&&o.nc("value",t.progress)},directives:[c.a],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),e}()},tBmH:function(e,t,n){"use strict";n.r(t),n.d(t,"UploadingModule",(function(){return T}));var i,a,o,r=n("ofXK"),c=n("6rvT"),s=n("/1cH"),l=n("bTqV"),u=n("A5z7"),d=n("NFeN"),p=n("STbY"),b=n("bv9b"),h=n("1jcm"),m=n("Qu3c"),f=n("GSRO"),g=n("3Pt+"),v=n("WOz2"),y=n("fo0W"),_=n("5+WD"),k=n("X3pI"),C=n("mhcW"),x=n("tyNb"),O=n("vHB1"),P=n("MFV3"),w=n("BeMW"),I=n("TheJ"),V=n("cVP4"),A=n("PUkl"),U=n("fXoL"),M=[{path:"",component:(i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=U.Jb({type:i,selectors:[["uploading-host"]],decls:1,vars:0,template:function(e,t){1&e&&U.Qb(0,"router-outlet")},directives:[x.j],styles:["[_nghost-%COMP%]{display:block;padding:25px;background-color:var(--be-background-alternative);height:100%;overflow:auto}"],changeDetection:0}),i),children:[{path:"",component:O.a,data:{permissions:["tracks.create","albums.create"]}},{path:"tracks/:id/edit",component:w.a,resolve:{api:P.a},canDeactivate:[A.a]},{path:"albums/:id/edit",component:I.a,resolve:{api:V.a},canDeactivate:[A.a],data:{simplified:!0}}]}],F=((o=function e(){_classCallCheck(this,e)}).\u0275mod=U.Nb({type:o}),o.\u0275inj=U.Mb({factory:function(e){return new(e||o)},imports:[[x.i.forChild(M)],x.i]}),o),T=((a=function e(){_classCallCheck(this,e)}).\u0275mod=U.Nb({type:a}),a.\u0275inj=U.Mb({factory:function(e){return new(e||a)},imports:[[r.c,x.i,C.a,F,d.b,b.b,c.a,f.a,g.E,g.o,l.c,v.a,u.e,h.b,m.b,y.a,_.e,s.b,p.c,k.a]]}),a)},vHB1:function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var i=n("fXoL"),a=n("h586"),o=n("2Vo4"),r=n("QeDF"),c=n("+fqm"),s=n("IAz0"),l=n("twBr"),u=n("kmQS"),d=n("i2dy"),p=n("2zME"),b=n("tyNb"),h=n("Se92"),m=n("mrSG"),f=n("Lm4C"),g=n("sgCb");function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a,o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a=e,new Promise((function(e){a.createReader().readEntries((function(t){return e(t)}))}));case 2:i=n.sent,n.t0=regeneratorRuntime.keys(i);case 4:if((n.t1=n.t0()).done){n.next=19;break}if(o=n.t1.value,!(r=i[o]).isDirectory){n.next=12;break}return n.next=10,v(r,t);case 10:n.next=17;break;case 12:return n.t2=t,n.next=15,y(r);case 15:n.t3=n.sent,n.t2.push.call(n.t2,n.t3);case 17:n.next=4;break;case 19:return n.abrupt("return",t);case 20:case"end":return n.stop()}}),n)})))}function y(e){return new Promise((function(t){e.file((function(n){t(new g.a(n,e.fullPath))}))}))}var _,k=((_=function(){function e(t){_classCallCheck(this,e),this.el=t,this.disableDropzoneClick=!1,this.disableDropzone=!1,this.uploadConfig={},this.filesDropped=new i.o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.el.nativeElement;t.addEventListener("dragenter",(function(t){return e.handleDragEnter(t)})),t.addEventListener("dragover",(function(t){return e.handleDragOver(t)})),t.addEventListener("dragleave",(function(t){return e.handleDragLeave(t)})),t.addEventListener("drop",(function(t){return e.handleDrop(t)})),this.disableDropzoneClick||(this.clickButton?this.clickButton.nativeElement:t).addEventListener("click",(function(){return e.handleClick()}))}},{key:"ngOnDestroy",value:function(){this.removeClassesFromDropzone()}},{key:"handleClick",value:function(){var e=this;this.disableDropzone||Object(f.a)(this.uploadConfig).then((function(t){e.emitUploadEvent(t)}))}},{key:"handleDragEnter",value:function(e){this.dropzoneDisabled(e)||this.el.nativeElement.classList.add("file-over-dropzone")}},{key:"handleDragOver",value:function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect=this.dropzoneDisabled(e)?"none":"move",!1}},{key:"handleDragLeave",value:function(e){var t=document.elementFromPoint(e.clientX,e.clientY);this.el.nativeElement.contains(t)||this.removeClassesFromDropzone()}},{key:"handleDrop",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),e.preventDefault(),this.removeClassesFromDropzone(),!this.dropzoneDisabled(e)&&e.dataTransfer.items){t.next=2;break}return t.abrupt("return");case 2:if(n=Array.from(e.dataTransfer.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.webkitGetAsEntry()})),t.t0=n.length,!t.t0){t.next=10;break}return t.t1=this,t.next=8,function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],t.t0=regeneratorRuntime.keys(e);case 2:if((t.t1=t.t0()).done){t.next=20;break}if(i=t.t1.value,!(a=e[i]).isDirectory){t.next=13;break}return t.t2=n,t.next=9,v(a);case 9:t.t3=t.sent,n=t.t2.concat.call(t.t2,t.t3),t.next=18;break;case 13:return t.t4=n,t.next=16,y(a);case 16:t.t5=t.sent,t.t4.push.call(t.t4,t.t5);case 18:t.next=2;break;case 20:return t.abrupt("return",n);case 21:case"end":return t.stop()}}),t)})))}(n);case 8:t.t2=t.sent,t.t1.emitUploadEvent.call(t.t1,t.t2);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"emitUploadEvent",value:function(e){this.filesDropped.emit(e)}},{key:"removeClassesFromDropzone",value:function(){this.el.nativeElement.classList.remove("file-over-dropzone")}},{key:"dropzoneDisabled",value:function(e){var t=e.dataTransfer.types.find((function(e){return"files"===e.toLowerCase()}));return this.disableDropzone||!t}}]),e}()).\u0275fac=function(e){return new(e||_)(i.Pb(i.l))},_.\u0275dir=i.Kb({type:_,selectors:[["","fileDropzone",""]],inputs:{disableDropzoneClick:"disableDropzoneClick",disableDropzone:"disableDropzone",clickButton:"clickButton",uploadConfig:["fileDropzone","uploadConfig"]},outputs:{filesDropped:"filesDropped"}}),_),C=n("Rd8u"),x=n("bTqV"),O=n("ofXK"),P=n("1jcm"),w=n("r48M"),I=n("IvAZ"),V=n("EO6T"),A=n("oJCZ"),U=n("8HKz"),M=n("A5z7"),F=["trackLinkInput"];function T(e,t){if(1&e&&(i.Vb(0,"mat-chip",23),i.Jc(1),i.Ub()),2&e){var n=i.gc();i.Cb(1),i.Kc(n.media.genres[0].name)}}var S,D=((S=function(){function e(t,n){_classCallCheck(this,e),this.settings=t,this.urls=n}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;setTimeout((function(){e.trackLinkInput.nativeElement.focus(),e.trackLinkInput.nativeElement.select()}))}},{key:"mediaLink",value:function(){return this.isTrack(this.media)?this.urls.track(this.media):this.urls.album(this.media)}},{key:"mediaUrl",value:function(){return this.urls.routerLinkToUrl(this.mediaLink())}},{key:"shareUsing",value:function(e){Object(V.a)(e,this.mediaUrl())}},{key:"isTrack",value:function(e){return e.model_type===I.a}}]),e}()).\u0275fac=function(e){return new(e||S)(i.Pb(u.a),i.Pb(A.a))},S.\u0275cmp=i.Jb({type:S,selectors:[["uploaded-media-preview"]],viewQuery:function(e,t){var n;1&e&&i.Fc(F,!0),2&e&&i.uc(n=i.dc())&&(t.trackLinkInput=n.first)},hostAttrs:[1,"material-panel"],inputs:{media:"media"},decls:32,vars:14,consts:[[1,"media-image-container"],[3,"media"],["alt","album border image",1,"album-border-image",3,"src"],[1,"middle-column"],[1,"artist-name"],[1,"track-name"],[1,"genre-row"],["class","track-genre",4,"ngIf"],[1,"message"],["trans",""],["trans","",3,"routerLink"],[1,"right-column"],["trans","",1,"title"],[1,"share-icons"],["mat-icon-button","",3,"click"],["alt","facebook-icon",3,"src"],["alt","twitter-icon",3,"src"],["alt","tumblr-icon",3,"src"],["alt","blogger-icon",3,"src"],[1,"track-link-input","input-container"],["for","media-item-link","trans","",1,"hidden"],["id","media-item-link","type","text","readonly","",3,"value","click"],["trackLinkInput",""],[1,"track-genre"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Qb(1,"media-image",1),i.Qb(2,"img",2),i.Ub(),i.Vb(3,"div",3),i.Vb(4,"div",4),i.Jc(5),i.Ub(),i.Vb(6,"div",5),i.Jc(7),i.Ub(),i.Vb(8,"div",6),i.Hc(9,T,2,1,"mat-chip",7),i.Ub(),i.Vb(10,"div",8),i.Vb(11,"span",9),i.Jc(12,"Upload complete."),i.Ub(),i.Vb(13,"a",10),i.Jc(14," View now."),i.Ub(),i.Ub(),i.Ub(),i.Vb(15,"div",11),i.Vb(16,"div",12),i.Jc(17),i.Ub(),i.Vb(18,"div",13),i.Vb(19,"button",14),i.cc("click",(function(){return t.shareUsing("facebook")})),i.Qb(20,"img",15),i.Ub(),i.Vb(21,"button",14),i.cc("click",(function(){return t.shareUsing("twitter")})),i.Qb(22,"img",16),i.Ub(),i.Vb(23,"button",14),i.cc("click",(function(){return t.shareUsing("tumblr")})),i.Qb(24,"img",17),i.Ub(),i.Vb(25,"button",14),i.cc("click",(function(){return t.shareUsing("blogger")})),i.Qb(26,"img",18),i.Ub(),i.Ub(),i.Vb(27,"div",19),i.Vb(28,"label",20),i.Jc(29,"Media link"),i.Ub(),i.Vb(30,"input",21,22),i.cc("click",(function(e){return e.target.select()})),i.Ub(),i.Ub(),i.Ub()),2&e&&(i.Gb("show-album-border",!t.isTrack(t.media)),i.Cb(1),i.nc("media",t.media),i.Cb(1),i.nc("src",t.settings.getAssetUrl("images/album-border.png"),i.Bc),i.Cb(3),i.Kc(t.isTrack(t.media)?t.media.artists[0].name:t.media.artist.name),i.Cb(2),i.Kc(t.media.name),i.Cb(2),i.nc("ngIf",t.media.genres.length),i.Cb(4),i.nc("routerLink",t.mediaLink()),i.Cb(4),i.Lc("Share your new ",t.isTrack(t.media)?"track":"album",""),i.Cb(3),i.oc("src",t.settings.getAssetUrl("images/social-icons/facebook.png"),i.Bc),i.Cb(2),i.oc("src",t.settings.getAssetUrl("images/social-icons/twitter.png"),i.Bc),i.Cb(2),i.oc("src",t.settings.getAssetUrl("images/social-icons/tumblr.png"),i.Bc),i.Cb(2),i.oc("src",t.settings.getAssetUrl("images/social-icons/bloggr.png"),i.Bc),i.Cb(4),i.nc("value",t.mediaUrl()))},directives:[U.a,O.t,C.a,b.h,x.b,M.a],styles:["[_nghost-%COMP%]{display:flex;align-items:center;min-width:800px;max-width:100%}.media-image-container[_ngcontent-%COMP%]{flex-shrink:0;width:130px;height:130px}.media-image-container.show-album-border[_ngcontent-%COMP%]{position:relative;margin:15px 15px 15px 20px}.media-image-container.show-album-border[_ngcontent-%COMP%]   .album-border-image[_ngcontent-%COMP%]{display:block}media-image[_ngcontent-%COMP%]     img{position:relative;z-index:2}.album-border-image[_ngcontent-%COMP%]{display:none;position:absolute;width:160px;height:160px;top:-15px;left:-15px;z-index:1}.middle-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{flex:1 1 auto}.middle-column[_ngcontent-%COMP%]{padding:0 20px}.artist-name[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.track-name[_ngcontent-%COMP%]{font-weight:500}.genre-row[_ngcontent-%COMP%]{margin:10px 0 20px}.right-column[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--be-secondary-text);margin-bottom:5px}.right-column[_ngcontent-%COMP%]   .share-icons[_ngcontent-%COMP%]{margin-bottom:30px}.right-column[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{margin-right:5px;width:32px;height:32px;line-height:32px}.right-column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px}"],changeDetection:0}),S),E=["clickMatButton"];function j(e,t){if(1&e){var n=i.Wb();i.Vb(0,"div",11),i.Vb(1,"mat-slide-toggle",12),i.cc("change",(function(e){return i.yc(n),i.gc().createAlbum$.next(e.checked)})),i.Jc(2,"Create Album"),i.Ub(),i.Vb(3,"p",13),i.Jc(4,"Attach all uploaded files to a new album."),i.Ub(),i.Ub()}}function Q(e,t){if(1&e){var n=i.Wb();i.Vb(0,"div",14),i.Vb(1,"mat-slide-toggle",12),i.cc("change",(function(e){return i.yc(n),i.gc().autoCreateArtists=e.checked})),i.Jc(2,"Create Artists"),i.Ub(),i.Vb(3,"p",13),i.Jc(4,"Automatically create artists based on track metadata (unless artist already exists)."),i.Ub(),i.Ub()}}function R(e,t){if(1&e&&(i.Vb(0,"div",15),i.Vb(1,"span",13),i.Jc(2),i.Vb(3,"a",16),i.Jc(4,"Pro accounts"),i.Ub(),i.Jc(5," to get more time and access to advanced features."),i.Ub(),i.Ub()),2&e){var n=t.ngIf;i.Cb(2),i.Lc("You have ",n," minutes left. Try ")}}function L(e,t){if(1&e){var n=i.Wb();i.Vb(0,"album-form",21),i.cc("saved",(function(e){return i.yc(n),i.gc(3).addSavedMedia(e)})),i.Ub()}if(2&e){var a=i.gc(3);i.nc("hideArtistControl",!a.insideAdmin())}}function $(e,t){if(1&e){var n=i.Wb();i.Vb(0,"div",23),i.Vb(1,"track-form",24),i.cc("saved",(function(e){return i.yc(n),i.gc(5).addSavedMedia(e)})),i.Ub(),i.Ub()}if(2&e){var a=t.$implicit;i.Cb(1),i.nc("uploadQueueItem",a)}}function H(e,t){if(1&e&&(i.Tb(0),i.Hc(1,$,2,1,"div",22),i.Sb()),2&e){var n=i.gc(3).ngIf,a=i.gc();i.Cb(1),i.nc("ngForOf",n)("ngForTrackBy",a.trackByFn)}}function J(e,t){if(1&e&&(i.Hc(0,H,2,2,"ng-container",18),i.hc(1,"async")),2&e){var n=i.gc(3);i.nc("ngIf",i.ic(1,1,n.errors$))}}function z(e,t){if(1&e&&(i.Tb(0),i.Hc(1,L,1,1,"album-form",19),i.hc(2,"async"),i.Hc(3,J,2,3,"ng-template",null,20,i.Ic),i.Sb()),2&e){var n=i.vc(4),a=i.gc(2);i.Cb(1),i.nc("ngIf",i.ic(2,2,a.createAlbum$))("ngIfElse",n)}}function B(e,t){if(1&e&&(i.Vb(0,"div",17),i.Hc(1,z,5,4,"ng-container",18),i.Ub()),2&e){var n=t.ngIf;i.Cb(1),i.nc("ngIf",n.length)}}function N(e,t){1&e&&i.Qb(0,"uploaded-media-preview",25),2&e&&i.nc("media",t.$implicit)}var K,q=((K=function(){function e(t,n,i,a,c,s,l,u,d){_classCallCheck(this,e),this.track=t,this.currentUser=n,this.uploadQueue=i,this.settings=a,this.tracks=c,this.toast=s,this.audioValidator=l,this.router=u,this.waveGenerator=d,this.errors$=new o.a({}),this.uploadConfig={types:[r.a.video,r.a.audio],multiple:!0},this.savedMedia$=new o.a([]),this.createAlbum$=new o.a(!1),this.autoCreateArtists=!1,this.trackByFn=function(e,t){return t.id}}return _createClass(e,[{key:"uploadTracks",value:function(e){var t=this;this.uploadQueue.start(e,{uri:"uploads",httpParams:{autoMatch:this.autoCreateArtists,diskPrefix:"track_media",disk:"public"},validator:this.audioValidator,willProcessFiles:!0}).subscribe((function(e){var n=t.uploadQueue.find(e.queueItemId);t.waveGenerator.generate(n.uploadedFile.native).then((function(e){n.customData={waveData:e},n.finishProcessing()}))}))}},{key:"addSavedMedia",value:function(e){this.savedMedia$.next([].concat(_toConsumableArray(this.savedMedia$.value),[e]))}},{key:"insideAdmin",value:function(){return this.router.url.indexOf("admin")>-1}}]),e}()).\u0275fac=function(e){return new(e||K)(i.Pb(s.a),i.Pb(l.a),i.Pb(a.a),i.Pb(u.a),i.Pb(s.a),i.Pb(d.a),i.Pb(p.a),i.Pb(b.e),i.Pb(h.c))},K.\u0275cmp=i.Jb({type:K,selectors:[["upload-page"]],viewQuery:function(e,t){var n;1&e&&(i.Fc(E,!0,i.l),i.Pc(c.a,!0)),2&e&&(i.uc(n=i.dc())&&(t.clickButton=n.first),i.uc(n=i.dc())&&(t.trackForms=n))},features:[i.Bb([a.a])],decls:15,vars:11,consts:[[1,"dropzone",3,"fileDropzone","clickButton","filesDropped"],["trans","",1,"title"],[1,"action-button"],["mat-flat-button","","color","accent","type","button","trans","",1,"upload-button"],["clickMatButton",""],["class","setting-toggle-container",4,"ngIf"],["class","setting-toggle-container create-artists-toggle material-panel",4,"ngIf"],["class","minutes-container",4,"ngIf"],["class","track-upload-queue",4,"ngIf"],[1,"saved-tracks"],[3,"media",4,"ngFor","ngForOf"],[1,"setting-toggle-container"],["trans","",3,"change"],["trans",""],[1,"setting-toggle-container","create-artists-toggle","material-panel"],[1,"minutes-container"],["routerLink","/billing/upgrade","target","_blank",1,"hover-underline"],[1,"track-upload-queue"],[4,"ngIf"],["class","material-panel",3,"hideArtistControl","saved",4,"ngIf","ngIfElse"],["createTracks",""],[1,"material-panel",3,"hideArtistControl","saved"],["class","track-panel material-panel",4,"ngFor","ngForOf","ngForTrackBy"],[1,"track-panel","material-panel"],[3,"uploadQueueItem","saved"],[3,"media"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.cc("filesDropped",(function(e){return t.uploadTracks(e)})),i.Vb(1,"div",1),i.Jc(2,"Drag and drop your tracks, videos & albums here."),i.Ub(),i.Vb(3,"div",2),i.Vb(4,"button",3,4),i.Jc(6,"or choose files to upload"),i.Ub(),i.Ub(),i.Hc(7,j,5,0,"div",5),i.Ub(),i.Hc(8,Q,5,0,"div",6),i.Hc(9,R,6,1,"div",7),i.Hc(10,B,2,1,"div",8),i.hc(11,"async"),i.Vb(12,"div",9),i.Hc(13,N,1,1,"uploaded-media-preview",10),i.hc(14,"async"),i.Ub()),2&e&&(i.nc("fileDropzone",t.uploadConfig)("clickButton",t.clickButton),i.Cb(7),i.nc("ngIf",t.uploadQueue.isEmpty()),i.Cb(1),i.nc("ngIf",t.insideAdmin()&&t.currentUser.hasPermission("artists.create")),i.Cb(1),i.nc("ngIf",t.currentUser.getRestrictionValue("tracks.create","minutes")),i.Cb(1),i.nc("ngIf",i.ic(11,7,t.uploadQueue.uploads$)),i.Cb(3),i.nc("ngForOf",i.ic(14,9,t.savedMedia$)))},directives:[k,C.a,x.b,O.t,O.s,P.a,b.h,w.a,c.a,D],pipes:[O.b],styles:["admin[_nghost-%COMP%], admin   [_nghost-%COMP%]{min-height:calc(100vh - 120px)}[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;min-height:100%}.dropzone[_ngcontent-%COMP%]{background:var(--be-background);padding:50px;border-radius:4px;text-align:center;border:1px solid var(--be-divider-default);min-width:520px;max-width:90%}.dropzone[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{margin-top:20px}.dropzone[_ngcontent-%COMP%]   .setting-toggle-container[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid var(--be-divider-lighter)}.dropzone[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.8rem}.dropzone[_ngcontent-%COMP%]   .setting-toggle-container[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.dropzone.file-over-dropzone[_ngcontent-%COMP%]{border-color:var(--be-accent-default);background-color:var(--be-accent-emphasis)}.create-artists-toggle[_ngcontent-%COMP%]{margin-top:20px;min-width:520px;text-align:center}.minutes-container[_ngcontent-%COMP%]{color:var(--be-secondary-text);font-size:1.5rem;margin-top:20px}.minutes-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--be-accent-default)}.track-upload-queue[_ngcontent-%COMP%]{width:100%;margin-top:40px}.track-panel[_ngcontent-%COMP%]{margin-bottom:20px;padding:20px 25px}uploaded-media-preview[_ngcontent-%COMP%]{margin-bottom:15px}"],changeDetection:0}),K)}}]);
//# sourceMappingURL=1-es5.3755ce5e62cd4bf50aa6.js.map